{"version":3,"file":"js/app.50a25ff3.js","mappings":"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","sources":["webpack://my-vue-demo/./src/App.vue","webpack://my-vue-demo/./src/components/chat_box.vue","webpack://my-vue-demo/./src/config/openai.js","webpack://my-vue-demo/./src/components/chat_box.vue?83d4","webpack://my-vue-demo/./src/components/setting_panel.vue","webpack://my-vue-demo/./src/components/setting_panel.vue?f5cd","webpack://my-vue-demo/./src/App.vue?7ccd","webpack://my-vue-demo/./src/main.js","webpack://my-vue-demo/webpack/bootstrap","webpack://my-vue-demo/webpack/runtime/chunk loaded","webpack://my-vue-demo/webpack/runtime/compat get default export","webpack://my-vue-demo/webpack/runtime/define property getters","webpack://my-vue-demo/webpack/runtime/global","webpack://my-vue-demo/webpack/runtime/hasOwnProperty shorthand","webpack://my-vue-demo/webpack/runtime/make namespace object","webpack://my-vue-demo/webpack/runtime/jsonp chunk loading","webpack://my-vue-demo/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <SettingPanel \n      :currentChatId=\"currentChatId\"\n      @model-changed=\"handleModelChange\"\n      @chat-selected=\"handleChatSelected\"\n      @chat-deleted=\"handleChatDeleted\"\n      ref=\"settingPanel\"\n    />\n    <ChatBox \n      :currentChat=\"currentChat\"\n      :selectedModel=\"selectedModel\"\n      @chat-updated=\"handleChatUpdated\"\n  @new-chat=\"handleCreateNewChat\"\n    />\n  </div>\n</template>\n\n<script>\nimport ChatBox from './components/chat_box.vue'\nimport SettingPanel from './components/setting_panel.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    ChatBox,\n    SettingPanel\n  },\n  data() {\n    return {\n      selectedModel: 'openai:gpt-4.1',\n      currentChat: null,\n      currentChatId: null\n    }\n  },\n  methods: {\n    handleModelChange(model) {\n      this.selectedModel = model;\n    },\n    \n    handleChatSelected(chat) {\n      this.currentChat = chat;\n      this.currentChatId = chat.id;\n    },\n    \n    handleChatDeleted(chatId) {\n      if (this.currentChatId === chatId) {\n        this.currentChat = null;\n        this.currentChatId = null;\n      }\n    },\n    \n    handleChatUpdated(chat) {\n      this.currentChat = chat;\n      if (this.$refs.settingPanel) {\n        this.$refs.settingPanel.updateChatHistory(chat);\n      }\n    },\n    handleCreateNewChat() {\n      if (this.$refs.settingPanel && this.$refs.settingPanel.createNewChat) {\n        this.$refs.settingPanel.createNewChat();\n      }\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml, body {\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  /* 全局基础字号：原先未设置，默认约 14px/16px，这里放大 3px */\n  font-size: 17px;\n}\n\n#app {\n  height: 100vh;\n  display: flex;\n  flex-direction: row;\n  overflow: hidden; /* 防止整体滚动 */\n  width: 100%; /* 确保占满整个宽度 */\n}\n</style>\n","<template>\r\n  <div class=\"chat-container\">\r\n    <!-- 顶部标题栏 -->\r\n    <div class=\"chat-header\">\r\n      <h1>{{ currentModel }} - {{ currentChatTitle }}</h1>\r\n      <div class=\"header-actions\">\r\n        <button @click=\"toggleDebug\" class=\"debug-button\" :class=\"{active: showDebug}\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M3 4h18M3 12h18M3 20h18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          Debug\r\n        </button>\r\n        <button @click=\"clearChat\" class=\"clear-button\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          清空对话\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天消息区域 -->\r\n    <div class=\"chat-messages\" ref=\"messagesContainer\">\r\n      <div v-if=\"messages.length === 0\" class=\"welcome-message\">\r\n        <div class=\"welcome-content\">\r\n          <h2>Hello! I'm ChatGPT</h2>\r\n          <p>我是一个AI助手，很高兴为您服务。请问有什么可以帮助您的吗？</p>\r\n        </div>\r\n      </div>\r\n      \r\n      <div \r\n        v-for=\"message in messages\" \r\n        :key=\"message.id\"\r\n        :class=\"['message-wrapper', message.type]\"\r\n      >\r\n        <div class=\"message-content\">\r\n          <div class=\"avatar\">\r\n            <div v-if=\"message.type === 'user'\" class=\"user-avatar\">U</div>\r\n            <div v-else class=\"ai-avatar\">\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div class=\"message-text\">\r\n            <div v-if=\"message.type === 'assistant' && message.isTyping\" class=\"typing-indicator\">\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </div>\r\n            <div v-else v-html=\"renderedMessage(message.text)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 输入区域 -->\r\n    <div class=\"chat-input-container\">\r\n      <div class=\"chat-input-toolbar\">\r\n        <button class=\"new-chat-btn\" @click=\"$emit('new-chat')\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M12 5v14M5 12h14\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          新对话\r\n        </button>\r\n  </div>\r\n  <div class=\"input-wrapper fill\">\r\n        <textarea \r\n          v-model=\"currentMessage\"\r\n          @keydown=\"handleKeydown\"\r\n          @input=\"adjustTextareaHeight\"\r\n          placeholder=\"Ctrl+Enter 发送 (Mac: Cmd+Enter)...\"\r\n          class=\"message-input\"\r\n          rows=\"1\"\r\n          :disabled=\"isLoading\"\r\n          ref=\"messageInput\"\r\n        ></textarea>\r\n        <button \r\n          @click=\"sendMessage\"\r\n          :disabled=\"!currentMessage.trim() || isLoading\"\r\n          class=\"send-button\"\r\n        >\r\n          <svg v-if=\"!isLoading\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 11L11 13\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          </svg>\r\n          <div v-else class=\"loading-spinner\"></div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Debug Panel -->\r\n    <div v-if=\"showDebug\" class=\"debug-panel\">\r\n      <div class=\"debug-header\">\r\n        <span>Debug 信息</span>\r\n        <button class=\"close-btn\" @click=\"toggleDebug\">×</button>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>当前系统 Prompt</h4>\r\n        <pre class=\"debug-pre\" v-text=\"currentSystemPrompt || '（无）'\"></pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次请求 Payload (已脱敏)</h4>\r\n        <pre class=\"debug-pre\">{{ formattedLastRequest }}</pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次原始响应 JSON</h4>\r\n        <pre class=\"debug-pre\">{{ lastResponseRaw }}</pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次生成文本</h4>\r\n        <pre class=\"debug-pre\" v-text=\"lastResponseText || '（无）'\"></pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProviderConfig, buildChatPayload, buildAuthHeaders, isConfigReady } from '@/config/openai.js'\r\nimport MarkdownIt from 'markdown-it'\r\nimport hljs from 'highlight.js'\r\nimport 'highlight.js/styles/github-dark.min.css'\r\nimport markdownItTaskLists from 'markdown-it-task-lists'\r\nimport markdownItMultiMdTable from 'markdown-it-multimd-table'\r\nimport DOMPurify from 'dompurify'\r\n\r\n// MathJax 配置（需在脚本加载前放入 window）\r\nif (!window.MathJax) {\r\n  window.MathJax = {\r\n    tex: {\r\n      inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],\r\n      displayMath: [['$$','$$'], ['\\\\[','\\\\]']],\r\n      processEscapes: true,\r\n      tags: 'none'\r\n    },\r\n    options: {\r\n      skipHtmlTags: ['script','noscript','style','textarea','pre','code'],\r\n      ignoreHtmlClass: 'tex2jax_ignore' // 移除 processHtmlClass，避免阻止解析\r\n    },\r\n    startup: { typeset: false } // 我们手动调用\r\n  };\r\n  console.log('[MathJax] config injected');\r\n}\r\n\r\n// 允许 MathML（保留原 DOMPurify 配置，MathJax v3 默认输出 <mjx-container> 内部安全）\r\ntry {\r\n  DOMPurify.setConfig({\r\n    USE_PROFILES: { html: true },\r\n  });\r\n} catch(e) { /* 忽略 */ }\r\n\r\nexport default {\r\n  name: 'ChatBox',\r\n  props: {\r\n    currentChat: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    selectedModel: {\r\n      type: String,\r\n      default: 'gpt-4.1'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentMessage: '',\r\n      messages: [],\r\n      isLoading: false,\r\n      // Debug 相关\r\n      showDebug: false,\r\n      lastRequestPayload: null,\r\n      lastResponseRaw: '',\r\n      lastResponseText: '',\r\n      md: null,\r\n      mathJaxReady: false,\r\n      mjTypesetTimer: null // 重命名，避免以 _ 开头\r\n    }\r\n  },\r\n  computed: {\r\n    currentModel() {\r\n      const raw = this.selectedModel || '';\r\n      const model = raw.includes(':') ? raw.split(':').slice(1).join(':') : raw;\r\n      return model.toUpperCase();\r\n    },\r\n    currentChatTitle() {\r\n      return this.currentChat ? this.currentChat.title : '新对话';\r\n    },\r\n    currentSystemPrompt() {\r\n      return this.currentChat && this.currentChat.systemPrompt ? this.currentChat.systemPrompt : '';\r\n    },\r\n    formattedLastRequest() {\r\n      if (!this.lastRequestPayload) return '（无）';\r\n      try { return JSON.stringify(this.lastRequestPayload, null, 2); } catch { return '（格式化失败）'; }\r\n    }\r\n  },\r\n  watch: {\r\n    currentChat: {\r\n      handler(newChat) {\r\n        if (newChat) {\r\n          this.messages = [...newChat.messages];\r\n          this.$nextTick(() => {\r\n            this.scrollToBottom();\r\n          });\r\n        } else {\r\n          this.messages = [];\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    this.md = new MarkdownIt({\r\n      html: false,\r\n      linkify: true,\r\n      breaks: true,\r\n      highlight: (str, lang) => {\r\n        // 最小化：仅调用 highlight.js，高亮失败则让 markdown-it 走默认转义\r\n        if (lang && hljs.getLanguage(lang)) {\r\n          try {\r\n            const out = hljs.highlight(str, { language: lang, ignoreIllegals: true }).value;\r\n            return `<pre><code class=\"hljs language-${lang}\">${out}</code></pre>`;\r\n          } catch (e) { /* ignore */ }\r\n        }\r\n        return ''; // 交由 markdown-it 自行转义生成 <pre><code>\r\n      }\r\n    })\r\n      .use(markdownItTaskLists, { enabled: true })\r\n      .use(markdownItMultiMdTable, { multiline: true, rowspan: true, headerless: true });\r\n  },\r\n  mounted() {\r\n    this.loadMathJax();\r\n    // 监听代码复制按钮\r\n    this._codeCopyHandler = (e) => this.handleCodeCopyClick(e);\r\n    this.$refs.messagesContainer?.addEventListener('click', this._codeCopyHandler);\r\n  },\r\n  beforeUnmount() {\r\n    // Vue3 对应销毁前清理\r\n    if (this._codeCopyHandler && this.$refs.messagesContainer) {\r\n      this.$refs.messagesContainer.removeEventListener('click', this._codeCopyHandler);\r\n    }\r\n  },\r\n  updated() {\r\n    // 组件更新后尝试排版数学\r\n    this.scheduleMathTypeset();\r\n  // 增强代码块（添加语言标签与复制按钮）\r\n  this.$nextTick(() => this.enhanceCodeBlocks());\r\n  },\r\n  methods: {\r\n    storageKey() { return 'chat_history_v1'; },\r\n\r\n    persistCurrentChat() {\r\n      // 仅更新当前对话在 localStorage 中的内容（SettingPanel 已整体保存）\r\n      try {\r\n        const raw = localStorage.getItem(this.storageKey());\r\n        if (!raw) return;\r\n        const arr = JSON.parse(raw);\r\n        if (!this.currentChat) return;\r\n        const idx = arr.findIndex(c => String(c.id) === String(this.currentChat.id));\r\n        if (idx > -1) {\r\n          arr[idx].messages = this.messages.map(m => ({\r\n            ...m,\r\n            timestamp: m.timestamp instanceof Date ? m.timestamp.toISOString() : m.timestamp\r\n          }));\r\n          arr[idx].updatedAt = new Date().toISOString();\r\n          localStorage.setItem(this.storageKey(), JSON.stringify(arr));\r\n        }\r\n      } catch(e) {\r\n        console.warn('持久化当前对话失败', e);\r\n      }\r\n    },\r\n\r\n    async sendMessage() {\r\n      if (!this.currentMessage.trim() || this.isLoading) return;\r\n      const userMessage = {\r\n        id: Date.now(),\r\n        text: this.currentMessage.trim(),\r\n        type: 'user',\r\n        timestamp: new Date()\r\n      };\r\n      this.messages.push(userMessage);\r\n      this.currentMessage = '';\r\n      this.adjustTextareaHeight();\r\n      this.scrollToBottom();\r\n      this.persistCurrentChat();\r\n      const aiMessage = {\r\n        id: Date.now() + 1,\r\n        text: '',\r\n        type: 'assistant',\r\n        timestamp: new Date(),\r\n        isTyping: true\r\n      };\r\n      this.messages.push(aiMessage);\r\n      this.scrollToBottom();\r\n      this.persistCurrentChat();\r\n      try {\r\n        this.isLoading = true;\r\n        const response = await this.callOpenAI();\r\n        this.messages.pop();\r\n        this.messages.push({\r\n          id: Date.now() + 2,\r\n            text: response,\r\n            type: 'assistant',\r\n            timestamp: new Date(),\r\n            isTyping: false\r\n        });\r\n      } catch (error) {\r\n        console.error('OpenAI API Error:', error);\r\n        this.messages.pop();\r\n        this.messages.push({\r\n          id: Date.now() + 2,\r\n          text: '抱歉，我现在无法回复。请稍后再试。',\r\n          type: 'assistant',\r\n          timestamp: new Date(),\r\n          isTyping: false\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n        this.scrollToBottom();\r\n        this.updateCurrentChat();\r\n        this.persistCurrentChat();\r\n      }\r\n    },\r\n    \r\n    updateCurrentChat() {\r\n      if (this.currentChat) {\r\n        const updatedChat = {\r\n          ...this.currentChat,\r\n          messages: [...this.messages],\r\n          updatedAt: new Date()\r\n        };\r\n        this.$emit('chat-updated', updatedChat);\r\n      }\r\n    },\r\n    \r\n    async callOpenAI() {\r\n      // selectedModel 现在可能是 \"provider:model\" 或仅 model\r\n      let provider = 'openai';\r\n      let model = this.selectedModel;\r\n      if (this.selectedModel.includes(':')) {\r\n        const parts = this.selectedModel.split(':');\r\n        provider = parts[0];\r\n        model = parts.slice(1).join(':');\r\n      }\r\n      if (!isConfigReady(provider)) {\r\n        return `未检测到 ${provider} 的有效 API Key，请在设置面板填写后再试。`;\r\n      }\r\n      const conversationHistory = this.buildConversationHistory();\r\n      const payload = buildChatPayload({ provider, model, messages: conversationHistory });\r\n      this.lastRequestPayload = { provider, ...payload };\r\n      const providerCfg = getProviderConfig(provider);\r\n      const response = await fetch(providerCfg.apiUrl, {\r\n        method: 'POST',\r\n        headers: buildAuthHeaders(provider),\r\n        body: JSON.stringify(payload)\r\n      });\r\n      if (!response.ok) { throw new Error(`API request failed: ${response.status}`); }\r\n      const data = await response.json();\r\n      this.lastResponseRaw = JSON.stringify(data, null, 2);\r\n      const content = data.choices && data.choices[0] && data.choices[0].message ? data.choices[0].message.content : '';\r\n      this.lastResponseText = content;\r\n      return content;\r\n    },\r\n    \r\n    buildConversationHistory() {\r\n      const history = [];\r\n      if (this.currentSystemPrompt) {\r\n        history.push({ role: 'system', content: this.currentSystemPrompt });\r\n      }\r\n      // 读取当前聊天的最大轮数配置（轮=用户+AI）\r\n      let maxTurns = 20;\r\n      if (this.currentChat && typeof this.currentChat.maxHistoryTurns === 'number') {\r\n        maxTurns = this.currentChat.maxHistoryTurns;\r\n      }\r\n      const filtered = this.messages.filter(m => !m.isTyping);\r\n      if (filtered.length === 0) {\r\n        return history;\r\n      }\r\n      // 当前最后一条用户消息（刚发送，尚无 assistant 回复）\r\n      const lastUserMessage = (() => {\r\n        for (let i = filtered.length - 1; i >= 0; i--) {\r\n          if (filtered[i].type === 'user') return filtered[i];\r\n          if (filtered[i].type === 'assistant') break; // 遇到 assistant 说明最后一条用户消息已有回复\r\n        }\r\n        return null;\r\n      })();\r\n      // 构建已完成轮（user + assistant）\r\n      const completedTurns = [];\r\n      for (let i = 0; i < filtered.length; i++) {\r\n        const m = filtered[i];\r\n        if (m.type === 'user') {\r\n          let assistantMsg = null;\r\n          for (let j = i + 1; j < filtered.length; j++) {\r\n            if (filtered[j].type === 'assistant') { assistantMsg = filtered[j]; break; }\r\n            if (filtered[j].type === 'user') break; // 下一个 user 开始新轮\r\n          }\r\n          // 如果此 user 是最后一个用户消息且没有 assistant 回复，则视为未完成，跳出（不加入已完成轮）\r\n          if (!assistantMsg && lastUserMessage && lastUserMessage === m) {\r\n            break;\r\n          }\r\n          completedTurns.push([\r\n            { role: 'user', content: m.text },\r\n            ...(assistantMsg ? [{ role: 'assistant', content: assistantMsg.text }] : [])\r\n          ]);\r\n        }\r\n      }\r\n      if (maxTurns === 0) {\r\n        // 只带系统 + 当前最后用户输入\r\n        if (lastUserMessage) {\r\n          history.push({ role: 'user', content: lastUserMessage.text });\r\n        }\r\n        return history;\r\n      }\r\n      // 取最后 maxTurns 轮\r\n      const selected = completedTurns.slice(-maxTurns).flat();\r\n      history.push(...selected);\r\n      if (lastUserMessage) {\r\n        history.push({ role: 'user', content: lastUserMessage.text });\r\n      }\r\n      return history;\r\n    },\r\n    \r\n    handleKeydown(event) {\r\n      // Ctrl+Enter 或 Cmd+Enter 发送，其它 Enter 默认换行\r\n      if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {\r\n        event.preventDefault();\r\n        this.sendMessage();\r\n      }\r\n    },\r\n    \r\n    adjustTextareaHeight() {\r\n      this.$nextTick(() => {\r\n        const textarea = this.$refs.messageInput;\r\n        if (!textarea) return;\r\n        // 填充模式下（输入区域占满剩余空间）不做自适应高度挤压，只允许内部滚动\r\n        if (textarea.closest('.input-wrapper')?.classList.contains('fill')) {\r\n          textarea.style.height = '100%';\r\n          return;\r\n        }\r\n        textarea.style.height = 'auto';\r\n        textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\r\n      });\r\n    },\r\n    \r\n    loadMathJax() {\r\n      if (window.MathJax?.typesetPromise) {\r\n        this.mathJaxReady = true;\r\n        this.scheduleMathTypeset();\r\n        return;\r\n      }\r\n      const scriptId = 'mathjax-script';\r\n      if (document.getElementById(scriptId)) return; // 正在加载\r\n      const s = document.createElement('script');\r\n      s.id = scriptId;\r\n      s.async = true;\r\n      s.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';\r\n      s.onload = () => {\r\n        this.mathJaxReady = true;\r\n        this.scheduleMathTypeset();\r\n      };\r\n      s.onerror = () => console.warn('MathJax 加载失败');\r\n      document.head.appendChild(s);\r\n    },\r\n    scheduleMathTypeset() {\r\n      if (!this.mathJaxReady) return;\r\n      if (this.mjTypesetTimer) clearTimeout(this.mjTypesetTimer);\r\n      this.mjTypesetTimer = setTimeout(() => this.typesetMath(), 40);\r\n    },\r\n    typesetMath() {\r\n      if (!this.mathJaxReady || !window.MathJax?.typesetPromise) return;\r\n      const root = this.$refs.messagesContainer;\r\n      if (!root) return;\r\n      // 只对 message-text 内部进行 typeset，避免重复处理 code block\r\n      const targets = root.querySelectorAll('.message-text');\r\n      window.MathJax.typesetPromise(Array.from(targets)).catch(err => console.warn('MathJax typeset 错误', err));\r\n    },\r\n    renderedMessage(text) {\r\n      if (!this.md) return text;\r\n      const rendered = this.md.render(text);\r\n      // 包一层便于调试（可在 Elements 里搜索 mjx-container 是否插入）\r\n      return `<span class=\"mjx-host\">${DOMPurify.sanitize(rendered)}</span>`;\r\n    },\r\n    enhanceCodeBlocks() {\r\n      const root = this.$refs.messagesContainer;\r\n      if (!root) return;\r\n      const blocks = root.querySelectorAll('pre > code');\r\n      blocks.forEach(codeEl => {\r\n        const preEl = codeEl.parentElement;\r\n        if (!preEl || preEl.dataset.enhanced) return;\r\n        const langClass = Array.from(codeEl.classList).find(c => c.startsWith('language-')) || '';\r\n        const lang = (langClass.replace('language-', '') || 'text').toLowerCase();\r\n        // 包装容器\r\n        const wrapper = document.createElement('div');\r\n        wrapper.className = 'code-block';\r\n        wrapper.setAttribute('data-lang', lang);\r\n        const header = document.createElement('div');\r\n        header.className = 'code-header';\r\n        const langSpan = document.createElement('span');\r\n        langSpan.className = 'code-lang';\r\n        langSpan.textContent = lang;\r\n        const copyBtn = document.createElement('button');\r\n        copyBtn.type = 'button';\r\n        copyBtn.className = 'code-copy-btn';\r\n        copyBtn.textContent = '复制';\r\n        copyBtn.setAttribute('aria-label', '复制代码');\r\n        header.appendChild(langSpan);\r\n        header.appendChild(copyBtn);\r\n        preEl.dataset.enhanced = '1';\r\n        preEl.classList.add('code-body');\r\n        preEl.parentNode.insertBefore(wrapper, preEl);\r\n        wrapper.appendChild(header);\r\n        wrapper.appendChild(preEl);\r\n      });\r\n    },\r\n    handleCodeCopyClick(e) {\r\n      const btn = e.target.closest('.code-copy-btn');\r\n      if (!btn) return;\r\n      const wrapper = btn.closest('.code-block');\r\n      if (!wrapper) return;\r\n      const code = wrapper.querySelector('pre > code');\r\n      if (!code) return;\r\n      const original = btn.textContent;\r\n      const text = code.innerText.replace(/\\n+$/,'');\r\n      navigator.clipboard.writeText(text).then(() => {\r\n        btn.textContent = '已复制';\r\n        btn.classList.add('copied');\r\n        setTimeout(() => { btn.textContent = original; btn.classList.remove('copied'); }, 1600);\r\n      }).catch(() => {\r\n        btn.textContent = '失败';\r\n        setTimeout(() => { btn.textContent = original; }, 1600);\r\n      });\r\n    },\r\n    clearChat() {\r\n      this.messages = [];\r\n      this.updateCurrentChat();\r\n      this.persistCurrentChat();\r\n    },\r\n    \r\n    toggleDebug() { this.showDebug = !this.showDebug; },\r\n    \r\n    scrollToBottom() {\r\n      this.$nextTick(() => {\r\n        const container = this.$refs.messagesContainer;\r\n        if (container) container.scrollTop = container.scrollHeight;\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  flex: 1; /* 占用剩余空间 */\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n  background: #f7f7f8;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 24px;\r\n  border-bottom: 1px solid #e5e5e5;\r\n  background: white;\r\n}\r\n\r\n.header-actions { display:flex; gap:12px; }\r\n\r\n.chat-header h1 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n}\r\n\r\n.clear-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: transparent;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 6px;\r\n  color: #6b7280;\r\n  font-size: 13px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.clear-button:hover {\r\n  background: #f9fafb;\r\n  border-color: #9ca3af;\r\n}\r\n\r\n.debug-button {\r\n  display:flex;\r\n  align-items:center;\r\n  gap:4px;\r\n  padding:8px 12px;\r\n  background:#334155;\r\n  color:#e2e8f0;\r\n  border:1px solid #475569;\r\n  border-radius:6px;\r\n  font-size:13px;\r\n  cursor:pointer;\r\n  transition:.2s;\r\n}\r\n\r\n.debug-button:hover {\r\n  background:#475569;\r\n}\r\n\r\n.debug-button.active {\r\n  background:#0f766e;\r\n  border-color:#0d9488;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 24px;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n}\r\n\r\n.welcome-message {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50%;\r\n  text-align: center;\r\n}\r\n\r\n.welcome-content h2 {\r\n  color: #2d3748;\r\n  font-size: 32px;\r\n  font-weight: 600;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.welcome-content p {\r\n  color: #6b7280;\r\n  font-size: 18px;\r\n  line-height: 1.6;\r\n}\r\n\r\n.message-wrapper {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.message-wrapper.user {\r\n  background: #f7f7f8;\r\n}\r\n\r\n.message-wrapper.assistant {\r\n  background: white;\r\n  border-bottom: 1px solid #e5e5e5;\r\n}\r\n\r\n.message-content {\r\n  display: flex;\r\n  max-width: none;\r\n  margin: 0;\r\n  padding: 24px;\r\n  gap: 16px;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n}\r\n\r\n.avatar {\r\n  flex-shrink: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n}\r\n\r\n.user-avatar {\r\n  background: #10a37f;\r\n  color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ai-avatar {\r\n  background: #10a37f;\r\n  color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.message-text {\r\n  flex: 1;\r\n  color: #2d3748;\r\n  line-height: 1.6;\r\n  font-size: 16px;\r\n  padding-top: 4px;\r\n}\r\n\r\n.typing-indicator {\r\n  display: flex;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n\r\n.typing-indicator span {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #10a37f;\r\n  animation: typing 1.4s infinite ease-in-out;\r\n}\r\n\r\n.typing-indicator span:nth-child(1) { animation-delay: -0.32s; }\r\n.typing-indicator span:nth-child(2) { animation-delay: -0.16s; }\r\n\r\n@keyframes typing {\r\n  0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }\r\n  40% { transform: scale(1); opacity: 1; }\r\n}\r\n\r\n.chat-input-container {\r\n  padding: 10px 24px 18px; /* 下边距略减，整体更贴底 */\r\n  background: white;\r\n  border-top: 1px solid #e5e5e5;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n  min-height: 280px; /* 提高下边界 */\r\n  display:flex;\r\n  flex-direction:column;\r\n}\r\n\r\n\r\n.chat-input-toolbar {\r\n  display:flex;\r\n  justify-content:flex-start;\r\n  margin:0 0 10px 0; /* 与上方 padding(14px) 相等，按钮上下留白一致且更小 */\r\n  gap:12px;\r\n}\r\n\r\n.new-chat-btn {\r\n  display:flex;\r\n  align-items:center;\r\n  gap:6px;\r\n  padding:6px 12px;\r\n  background:#10a37f;\r\n  color:#fff;\r\n  border:none;\r\n  border-radius:6px;\r\n  font-size:14px;\r\n  cursor:pointer;\r\n  transition:background .2s, box-shadow .2s;\r\n}\r\n\r\n.new-chat-btn:hover { background:#0d8f69; }\r\n\r\n.new-chat-btn:active { background:#0c7a5d; }\r\n\r\n.input-wrapper {\r\n  display: flex;\r\n  max-width: none;\r\n  margin: 0;\r\n  background: white;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  transition: border-color 0.2s, box-shadow 0.2s;\r\n  width: 100%;\r\n  min-width: 10; /* 允许收缩 */\r\n}\r\n.input-wrapper.fill { flex:1; min-height:0; }\r\n\r\n.input-wrapper:focus-within {\r\n  border-color: #10a37f;\r\n  box-shadow: 0 2px 8px rgba(16, 163, 127, 0.1);\r\n}\r\n\r\n.message-input {\r\n  flex: 1;\r\n  border: none;\r\n  outline: none;\r\n  resize: none;\r\n  font-size: 18px;\r\n  line-height: 1.5;\r\n  color: #2d3748;\r\n  background: transparent;\r\n  min-height: 72px; /* 基础最小 */\r\n  max-height: 260px; /* 允许更多行 */\r\n}\r\n.input-wrapper.fill .message-input {\r\n  height: 100%;\r\n  min-height: 0;\r\n  max-height: none;\r\n  overflow-y: auto;\r\n}\r\n\r\n.message-input::placeholder {\r\n  color: #9ca3af;\r\n}\r\n\r\n.send-button {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: none;\r\n  background: #10a37f;\r\n  color: white;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  align-self: flex-end;\r\n}\r\n\r\n.send-button:hover:not(:disabled) {\r\n  background: #0d8f69;\r\n}\r\n\r\n.send-button:disabled {\r\n  background: #d1d5db;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid transparent;\r\n  border-top: 2px solid currentColor;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n/* 滚动条样式 */\r\n.chat-messages::-webkit-scrollbar {\r\n  width: 4px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb {\r\n  background: #d1d5db;\r\n  border-radius: 2px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb:hover {\r\n  background: #9ca3af;\r\n}\r\n\r\n/* Debug 面板样式 */\r\n.chat-container { position:relative; /* 保证绝对定位的 debug 面板 */ }\r\n.debug-panel {\r\n  position:absolute;\r\n  top:0;\r\n  right:0;\r\n  width:360px;\r\n  height:100%;\r\n  background:#0f172a;\r\n  color:#e2e8f0;\r\n  border-left:1px solid #334155;\r\n  display:flex;\r\n  flex-direction:column;\r\n  z-index:30;\r\n}\r\n\r\n.debug-header {\r\n  display:flex;\r\n  justify-content:space-between;\r\n  align-items:center;\r\n  padding:10px 14px;\r\n  background:#1e293b;\r\n  border-bottom:1px solid #334155;\r\n  font-size:14px;\r\n  font-weight:600;\r\n}\r\n\r\n.close-btn {\r\n  background:transparent;\r\n  border:none;\r\n  color:#94a3b8;\r\n  font-size:20px;\r\n  line-height:1;\r\n  cursor:pointer;\r\n}\r\n\r\n.close-btn:hover {\r\n  color:#f1f5f9;\r\n}\r\n\r\n.debug-section {\r\n  padding:10px 14px;\r\n  border-bottom:1px solid #1e293b;\r\n  overflow:auto;\r\n}\r\n\r\n.debug-section h4 {\r\n  margin:0 0 6px 0;\r\n  font-size:12px;\r\n  font-weight:600;\r\n  color:#94a3b8;\r\n  text-transform:uppercase;\r\n  letter-spacing:.5px;\r\n}\r\n\r\n.debug-pre {\r\n  margin:0;\r\n  font-size:12px;\r\n  line-height:1.4;\r\n  white-space:pre-wrap;\r\n  word-break:break-word;\r\n  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Courier New\", monospace;\r\n  background:#1e293b;\r\n  padding:8px;\r\n  border-radius:4px;\r\n  max-height:150px;\r\n  overflow:auto;\r\n}\r\n\r\n@media (max-width: 900px){\r\n  .debug-panel { width:100%; }\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .chat-messages {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .message-content {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .chat-input-container {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .welcome-content h2 {\r\n    font-size: 24px;\r\n  }\r\n  \r\n  .welcome-content p {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n/* Markdown & 代码高亮样式 */\r\n/* 将正文基础字号从 14px 提升到 17px（放大 3px），提高可读性 */\r\n.message-text { font-size:17px; line-height:1.65; }\r\n.message-text h1, .message-text h2, .message-text h3 { font-weight:600; margin:16px 0 8px; line-height:1.3; }\r\n.message-text h1 { font-size:25px; }\r\n.message-text h2 { font-size:21px; }\r\n.message-text h3 { font-size:19px; }\r\n.message-text p { margin: 0 0 10px; }\r\n.message-text ul, .message-text ol { padding-left: 24px; margin: 8px 0 12px; }\r\n.message-text li { margin: 4px 0; }\r\n\r\n/* 行内代码样式优化 */\r\n.message-text code { \r\n  background: #f6f8fa;\r\n  color: #d73a49;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-family: Consolas, 'Consola', 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', 'Courier New', monospace;\r\n  border: 1px solid #e1e4e8;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 最小代码块间距 */\r\npre { margin:16px 0; }\r\n/* ------------- KaTeX / 数学公式相关 -------------\r\n  说明：KaTeX 渲染结果是通过 v-html 注入的，不会带有当前组件的 scoped attribute，\r\n  因此直接写 .katex / .katex-display 在 scoped 块里不会生效，需要用 :deep()。\r\n  如果仍然出现上标/根号错位，通常是因为基础 CSS 未成功加载，请检查：\r\n    1. 是否只在此处 (scoped) @import（不要这样做）\r\n    2. 打开 DevTools Elements 里查看 .katex span 是否有样式（如 .katex .vlist-span 等）\r\n*/\r\n/* :deep(.katex) { font-size: 1.02em; } */\r\n/* :deep(.katex-display) { margin:16px 0; padding:12px 16px; background:#f8fafc; border:1px dashed #cbd5e1; border-radius:6px; } */\r\n/* 若使用 Vue2 老语法可改为  >>> .katex  或  /deep/ .katex  */\r\n</style>\r\n<style>\r\n/* 全局样式 - 表格与任务列表优化 */\r\n.message-text table { \r\n  border-collapse: collapse;\r\n  width: 100%;\r\n  margin: 16px 0;\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: \r\n    0 4px 12px rgba(0, 0, 0, 0.05),\r\n    0 2px 4px rgba(0, 0, 0, 0.03),\r\n    0 0 0 1px rgba(0, 0, 0, 0.05);\r\n  font-size: 15px;\r\n}\r\n\r\n.message-text table thead {\r\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n}\r\n\r\n.message-text table th {\r\n  border: none;\r\n  border-bottom: 2px solid #e2e8f0;\r\n  padding: 14px 16px;\r\n  text-align: left;\r\n  font-weight: 600;\r\n  color: #374151;\r\n  font-size: 14px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  position: relative;\r\n}\r\n\r\n.message-text table th::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);\r\n  transform: scaleX(0);\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.message-text table th:hover::after {\r\n  transform: scaleX(1);\r\n}\r\n\r\n.message-text table td {\r\n  border: none;\r\n  border-bottom: 1px solid #f1f5f9;\r\n  padding: 12px 16px;\r\n  color: #4b5563;\r\n  vertical-align: top;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.message-text table tbody tr {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.message-text table tbody tr:hover {\r\n  background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);\r\n  transform: translateX(2px);\r\n}\r\n\r\n.message-text table tbody tr:hover td {\r\n  color: #1f2937;\r\n}\r\n\r\n.message-text table tbody tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n/* 斑马纹效果 */\r\n.message-text table tbody tr:nth-child(even) {\r\n  background: rgba(249, 250, 251, 0.3);\r\n}\r\n\r\n.message-text table tbody tr:nth-child(even):hover {\r\n  background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);\r\n}\r\n\r\n/* 任务列表优化 */\r\n.message-text input[type=checkbox] { \r\n  margin-right: 8px;\r\n  width: 16px;\r\n  height: 16px;\r\n  accent-color: #10a37f;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.message-text input[type=checkbox]:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* 引用块样式 */\r\n.message-text blockquote {\r\n  margin: 16px 0;\r\n  padding: 16px 20px;\r\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n  border-left: 4px solid #3b82f6;\r\n  border-radius: 0 8px 8px 0;\r\n  color: #4b5563;\r\n  font-style: italic;\r\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.message-text blockquote p {\r\n  margin: 0;\r\n}\r\n\r\n/* 分割线样式 */\r\n.message-text hr {\r\n  border: none;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, transparent 0%, #e2e8f0 20%, #cbd5e1 50%, #e2e8f0 80%, transparent 100%);\r\n  margin: 24px 0;\r\n  border-radius: 1px;\r\n}\r\n\r\n/* 链接样式 */\r\n.message-text a {\r\n  color: #3b82f6;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  position: relative;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.message-text a::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: -2px;\r\n  left: 0;\r\n  width: 0;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.message-text a:hover {\r\n  color: #1d4ed8;\r\n}\r\n\r\n.message-text a:hover::after {\r\n  width: 100%;\r\n}\r\n\r\n/* -------- ChatGPT 风格代码块增强（全局） -------- */\r\n.code-block { position:relative; margin:18px 0; border:1px solid #e2e8f0; border-radius:10px; overflow:hidden; background:#f5f7fa; box-shadow:0 2px 4px rgba(0,0,0,.05); }\r\n.code-block + .code-block { margin-top:24px; }\r\n.code-header { display:flex; align-items:center; justify-content:space-between; padding:6px 12px 5px; background:linear-gradient(135deg,#f8fafc 0%,#edf2f7 100%); border-bottom:1px solid #e2e8f0; font-size:12px; font-weight:500; font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans','PingFang SC','Microsoft YaHei',sans-serif; letter-spacing:.5px; color:#475569; }\r\n.code-lang { text-transform:uppercase; opacity:.75; }\r\n.code-copy-btn { position:relative; border:none; background:transparent; padding:2px 10px; font-size:12px; cursor:pointer; color:#334155; border-radius:6px; line-height:1.4; transition:.15s; font-weight:500; }\r\n.code-copy-btn:hover { background:#e2e8f0; color:#0f172a; }\r\n.code-copy-btn:active { background:#cbd5e1; }\r\n.code-copy-btn.copied { color:#059669; }\r\n.code-body { margin:0; background:#0f172a; color:#e2e8f0; padding:14px 0 14px; overflow:auto; border:none; }\r\n.code-body code { background:transparent !important; color:inherit; padding:0; border:none; font-size:14px; line-height:1.55; font-family:Consolas,'Consola','SF Mono','Monaco','Cascadia Code','Roboto Mono','Courier New',monospace; display:block; }\r\n.code-body::-webkit-scrollbar { height:10px; }\r\n.code-body::-webkit-scrollbar-track { background:transparent; }\r\n.code-body::-webkit-scrollbar-thumb { background:#334155; border-radius:6px; }\r\n.code-body::-webkit-scrollbar-thumb:hover { background:#475569; }\r\n\r\n/* 语言标签小圆点风格（可选） */\r\n.code-header::before { content:\"\"; width:10px; height:10px; border-radius:50%; margin-right:8px; background:#10a37f; box-shadow:14px 0 0 #f59e0b,28px 0 0 #ef4444; display:inline-block; opacity:.5; }\r\n.code-header .code-lang { margin-left:4px; }\r\n\r\n/* 高亮库基础调整 */\r\n.code-body .hljs { background:transparent; padding:0 16px; }\r\n.code-body .hljs-comment, .code-body .hljs-quote { color:#6b7280; font-style:italic; }\r\n.code-body .hljs-keyword { color:#38bdf8; }\r\n.code-body .hljs-string { color:#86efac; }\r\n.code-body .hljs-number, .code-body .hljs-literal { color:#fca5a5; }\r\n.code-body .hljs-title, .code-body .hljs-section { color:#c4b5fd; }\r\n.code-body .hljs-attr, .code-body .hljs-attribute, .code-body .hljs-name { color:#fbbf24; }\r\n.code-body .hljs-built_in, .code-body .hljs-type { color:#fda4af; }\r\n.code-body .hljs-meta { color:#f472b6; }\r\n.code-body .hljs-symbol, .code-body .hljs-bullet { color:#fcd34d; }\r\n.code-body .hljs-link { color:#93c5fd; text-decoration:underline; }\r\n.code-body .hljs-addition { background:rgba(16,163,127,.15); }\r\n.code-body .hljs-deletion { background:rgba(244,63,94,.25); }\r\n\r\n@media (max-width: 640px){\r\n  .code-header { padding:5px 10px; }\r\n  .code-body .hljs { padding:0 12px; }\r\n}\r\n\r\n</style>\r\n","// 通用 LLM 提供商配置工具（支持多提供商 + 动态本地存储 API Key）\r\n// 仅在浏览器端使用 localStorage 持久化，未做加密，请勿在共享/不安全环境存储生产密钥。\r\n\r\nconst PROVIDER_STORAGE_KEY = (p) => `llm_api_key_${p}`; // localStorage key 方案\r\n\r\n// 读取指定提供商的 API Key\r\nexport function getApiKey(provider) {\r\n  try { return localStorage.getItem(PROVIDER_STORAGE_KEY(provider)) || ''; } catch { return ''; }\r\n}\r\n\r\n// 保存指定提供商的 API Key\r\nexport function saveApiKey(provider, key) {\r\n  try { localStorage.setItem(PROVIDER_STORAGE_KEY(provider), key.trim()); } catch { /* 忽略 */ }\r\n}\r\n\r\n// 简单校验：非空且长度 > 10，可按需扩展（例如正则头缀判断）\r\nexport function isApiKeyValid(provider) {\r\n  const k = getApiKey(provider);\r\n  return !!k && k.length > 10; // 仅基础校验\r\n}\r\n\r\n// 各提供商基础配置（可按需扩展 headers / body transformer 等）\r\nexport function getProviderConfig(provider) {\r\n  switch (provider) {\r\n    case 'deepseek':\r\n      return {\r\n        name: 'DeepSeek',\r\n        apiUrl: 'https://api.deepseek.com/v1/chat/completions', // 占位，如与官方不同请替换\r\n        // 可扩展特定参数，如 stream / reasoning_mode 等\r\n        defaultParams: { temperature: 0.7, max_tokens: 4000 }\r\n      };\r\n    case 'openai':\r\n    default:\r\n      return {\r\n        name: 'OpenAI',\r\n        apiUrl: 'https://api.openai.com/v1/chat/completions',\r\n        // defaultParams: { temperature: 0.7, max_tokens: 1000 }\r\n        defaultParams: {}\r\n      };\r\n  }\r\n}\r\n\r\n// 统一构建请求 Payload（可在此做 provider 差异化适配）\r\nexport function buildChatPayload({ provider, model, messages, temperature, maxTokens }) {\r\n  const cfg = getProviderConfig(provider);\r\n  return {\r\n    model,\r\n    messages,\r\n    temperature: temperature ?? cfg.defaultParams.temperature,\r\n    max_tokens: maxTokens ?? cfg.defaultParams.max_tokens\r\n  };\r\n}\r\n\r\n// 构建请求头\r\nexport function buildAuthHeaders(provider) {\r\n  const key = getApiKey(provider);\r\n  return {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `Bearer ${key}`\r\n  };\r\n}\r\n\r\n// 对外暴露一个轻量总校验（当前仅校验 key）\r\nexport function isConfigReady(provider) {\r\n  return isApiKeyValid(provider);\r\n}\r\n\r\n// （兼容旧代码）导出占位 openaiConfig / isConfigValid，避免其它文件未更新时报错\r\nexport const openaiConfig = { apiSettings: { maxTokens: 1000, temperature: 0.7 } };\r\nexport const isConfigValid = () => isConfigReady('openai');\r\n\r\n","import { render } from \"./chat_box.vue?vue&type=template&id=d17ada74&scoped=true\"\nimport script from \"./chat_box.vue?vue&type=script&lang=js\"\nexport * from \"./chat_box.vue?vue&type=script&lang=js\"\n\nimport \"./chat_box.vue?vue&type=style&index=0&id=d17ada74&scoped=true&lang=css\"\nimport \"./chat_box.vue?vue&type=style&index=1&id=d17ada74&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d17ada74\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"setting-panel\" :class=\"{ 'panel-collapsed': panelCollapsed }\">\r\n    <!-- 头部 -->\r\n    <div class=\"panel-header\">\r\n      <h2 class=\"panel-title\" :class=\"{hidden: panelCollapsed}\">设置</h2>\r\n      <button class=\"panel-toggle-btn\" @click=\"togglePanel\" :title=\"panelCollapsed? '展开设置面板':'隐藏设置面板'\">\r\n        <span class=\"icon\" :class=\"{collapsed: panelCollapsed}\">\r\n          <!-- 使用纯 CSS 绘制箭头，备份文本符号 -->\r\n          ▶\r\n        </span>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 主体内容（可整体折叠） -->\r\n    <transition name=\"panel-body-fade\">\r\n      <div v-show=\"!panelCollapsed\" class=\"panel-body\">\r\n        <!-- 模型选择 (可折叠) -->\r\n    <div class=\"collapsible-section\" :class=\"{collapsed: collapsed.model}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('model')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.model}\">▶</span>\r\n          <h3>模型选择</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.model\">\r\n        <!-- Provider 选择 -->\r\n        <div class=\"model-select-wrapper\">\r\n          <label class=\"field-label\">提供商</label>\r\n          <select v-model=\"selectedProvider\" @change=\"onProviderChange\" class=\"model-select\">\r\n            <option v-for=\"p in providers\" :key=\"p.value\" :value=\"p.value\">{{ p.label }}</option>\r\n          </select>\r\n          <div class=\"select-arrow\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg></div>\r\n        </div>\r\n        <!-- Model 选择 -->\r\n        <div class=\"model-select-wrapper\">\r\n          <label class=\"field-label\">模型</label>\r\n            <select v-model=\"selectedModel\" @change=\"onModelChange\" class=\"model-select\">\r\n              <option v-for=\"m in filteredModels\" :key=\"m.value\" :value=\"m.value\">{{ m.name }} - {{ m.description }}</option>\r\n            </select>\r\n            <div class=\"select-arrow\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg></div>\r\n        </div>\r\n        <!-- API Key 输入 -->\r\n        <div class=\"api-key-wrapper\" :class=\"{ invalid: !providerKeyValid }\">\r\n          <label class=\"field-label\">{{ currentProviderLabel }} API Key</label>\r\n          <div class=\"api-key-input-row\">\r\n            <input :type=\"showApiKey ? 'text':'password'\" v-model=\"apiKeyInput\" placeholder=\"输入并保存当前提供商 API Key\" @input=\"onApiKeyInput\" />\r\n            <button class=\"save-key-btn\" @click=\"saveCurrentApiKey\" :disabled=\"!apiKeyDirty || !apiKeyInput.trim()\">保存</button>\r\n            <button class=\"toggle-key-btn\" @click=\"showApiKey=!showApiKey\">{{ showApiKey ? '隐藏' : '显示' }}</button>\r\n          </div>\r\n          <p class=\"api-key-hint\" v-if=\"!providerKeyValid\">未检测到有效 Key，请先填写。</p>\r\n          <p class=\"api-key-hint ok\" v-else>已保存。</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n        <!-- Prompt 配置 (新增，可折叠) -->\r\n    <div class=\"collapsible-section\" :class=\"{collapsed: collapsed.prompt}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('prompt')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.prompt}\">▶</span>\r\n          <h3>对话配置</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.prompt\">\r\n        <div class=\"prompt-toolbar\">\r\n          <!-- 新对话按钮已移至 ChatBox 中 -->\r\n          <div class=\"prompt-type-select-wrapper\">\r\n            <select v-model=\"promptTypeSelection\" class=\"prompt-type-select\" @change=\"onPromptTypeChange\">\r\n              <option v-for=\"opt in promptTypeOptions\" :key=\"opt.value\" :value=\"opt.value\">{{ opt.label }}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"prompt-editor-wrapper\">\r\n          <textarea\r\n            v-model=\"promptEditorContent\"\r\n            class=\"prompt-editor\"\r\n            :readonly=\"promptTypeSelection!=='自定义'\"\r\n            placeholder=\"请输入自定义 Prompt...\"\r\n          ></textarea>\r\n          <div class=\"history-turns-row\">\r\n            <label>最大历史对话轮数</label>\r\n            <input type=\"number\" min=\"0\" max=\"100\" v-model.number=\"maxHistoryInput\" />\r\n            \r\n          </div>\r\n          <div class=\"prompt-actions\">\r\n            <button class=\"apply-prompt-btn\" @click=\"applyPrompt\" :disabled=\"!currentChatId\">应用 Prompt</button>\r\n            <span class=\"prompt-status\" v-if=\"currentChatPromptAppliedAt\">已应用 {{ formatTime(currentChatPromptAppliedAt) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n        <!-- 聊天记录列表 (可折叠) -->\r\n    <div class=\"collapsible-section chat-history-section\" :class=\"{collapsed: collapsed.history}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('history')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.history}\">▶</span>\r\n          <h3>聊天记录</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.history\">\r\n        <div class=\"chat-list\">\r\n          <div \r\n            v-for=\"chat in chatHistory\" \r\n            :key=\"chat.id\"\r\n            class=\"chat-item\"\r\n            :class=\"{ active: currentChatId === chat.id }\"\r\n            @click=\"selectChat(chat.id)\"\r\n          >\r\n            <div class=\"chat-title\">{{ chat.title }}</div>\r\n            <div class=\"chat-time\">{{ formatTime(chat.updatedAt) }}</div>\r\n            <button @click.stop=\"deleteChat(chat.id)\" class=\"delete-btn\">\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path d=\"M18 6L6 18M6 6l12 12\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div v-if=\"chatHistory.length === 0\" class=\"empty-state\">\r\n            <p>暂无聊天记录</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SettingPanel',\r\n  props: { currentChatId: { type: [String, Number], default: null } },\r\n  data() {\r\n    return {\r\n      // Provider & Model\r\n      selectedProvider: 'openai',\r\n      providers: [ { value: 'openai', label: 'OpenAI' }, { value: 'deepseek', label: 'DeepSeek' } ],\r\n      selectedModel: 'gpt-4.1',\r\n      models: [\r\n        { provider:'openai', value:'gpt-4.1', name:'GPT-4.1', description:'高性能通用' },\r\n        { provider:'openai', value:'gpt-4.1-mini', name:'GPT-4.1 Mini', description:'轻量快速' },\r\n        { provider:'openai', value:'gpt-5', name:'GPT-5', description:'下一代（示例）' },\r\n        { provider:'openai', value:'gpt-5-mini', name:'GPT-5 Mini', description:'下一代轻量（示例）' },\r\n        { provider:'deepseek', value:'deepseek-chat', name:'DeepSeek V3', description:'V3 主力模型' },\r\n        { provider:'deepseek', value:'deepseek-reasoner', name:'DeepSeek R1', description:'R1 推理模型' },\r\n      ],\r\n      apiKeyInput: '',\r\n      apiKeyDirty: false,\r\n      showApiKey: false,\r\n      // Chat & Prompt\r\n      chatHistory: [],\r\n      promptTypeOptions: [ { value:'聊天助手', label:'聊天助手' }, { value:'中英文互译', label:'中英文互译' }, { value:'自定义', label:'自定义' } ],\r\n      promptTypeSelection: '聊天助手',\r\n      promptEditorContent: '',\r\n      currentChatPromptAppliedAt: null,\r\n      collapsed: { model:false, prompt:false, history:false },\r\n  maxHistoryInput: 20,\r\n  // 整体面板折叠\r\n  panelCollapsed: false\r\n    };\r\n  },\r\n  watch: {\r\n    currentChatId(n){ this.syncPromptUIFromChat(n); },\r\n    selectedProvider(){ this.ensureModelForProvider(); this.loadProviderApiKey(); }\r\n  },\r\n  computed: {\r\n    filteredModels(){ return this.models.filter(m=>m.provider===this.selectedProvider); },\r\n    currentProviderLabel(){ const p=this.providers.find(p=>p.value===this.selectedProvider); return p? p.label : this.selectedProvider; },\r\n    providerKeyValid(){ return this.isApiKeyValidRaw(this.apiKeyInput); }\r\n  },\r\n  methods: {\r\n    // Provider & API Key\r\n    providerStorageKey(p){ return `llm_api_key_${p}`; },\r\n    loadProviderApiKey(){ try { this.apiKeyInput = localStorage.getItem(this.providerStorageKey(this.selectedProvider)) || ''; } catch { this.apiKeyInput=''; } this.apiKeyDirty=false; },\r\n  saveCurrentApiKey(){ try { localStorage.setItem(this.providerStorageKey(this.selectedProvider), this.apiKeyInput.trim()); } catch (e) { /* ignore storage errors (quota/privacy) */ } this.apiKeyDirty=false; },\r\n    onApiKeyInput(){ this.apiKeyDirty = true; },\r\n    isApiKeyValidRaw(k){ return !!k && k.trim().length>10; },\r\n    onProviderChange(){ this.ensureModelForProvider(); this.loadProviderApiKey(); this.emitModelChanged(); },\r\n    ensureModelForProvider(){ if(!this.models.find(m=>m.provider===this.selectedProvider && m.value===this.selectedModel)){ const first=this.models.find(m=>m.provider===this.selectedProvider); if(first) this.selectedModel=first.value; }},\r\n    onModelChange(){ this.emitModelChanged(); },\r\n    emitModelChanged(){ this.$emit('model-changed', `${this.selectedProvider}:${this.selectedModel}`); this.saveToStorage(); },\r\n\r\n    // Prompt Global\r\n    globalPromptPrefix(){ return ['【全局输出规范】','1. 所有回答使用 Markdown 格式组织（标题、列表、表格、代码块等）。','2. 代码使用 ```语言\\n...\\n```，不要省略语言（若不确定可用 text）。','3. 数学公式：行内使用 $公式$，块级使用 $$\\n公式\\n$$。','4. 若需要同时给出多种方案，使用有序或无序列表。','5. 避免冗长寒暄，直接切入主题。'].join('\\n'); },\r\n    composeWithGlobal(core){ if(!core) return this.globalPromptPrefix(); const g=this.globalPromptPrefix(); return core.startsWith(g.slice(0,6))? core : g+'\\n\\n'+core; },\r\n    ensureGlobal(p){ return this.composeWithGlobal(p||''); },\r\n    toggleCollapse(k){ this.collapsed[k]=!this.collapsed[k]; },\r\n    promptPresets(){ return { '聊天助手':'你是一个友好、高效且专业的中文智能助手。请使用清晰、结构化的中文回答，必要时使用列表、步骤或示例。除非用户特别要求，请避免多余的寒暄，直接切入重点。','中英文互译':'你是一名专业的中英文互译助手。\\n要求：\\n1. 识别输入语言，翻译成另一种语言；\\n2. 保留原意、语气和专有名词；\\n3. 若输入同时含两种语言，则分别给出两种语言的优化版本；\\n4. 输出格式：\\n- 原文: ...\\n- 翻译: ...\\n- 备注: ...' }; },\r\n    defaultHistoryTurnsMap(){ return { '聊天助手':20,'中英文互译':0,'自定义':10 }; },\r\n    storageKey(){ return 'chat_history_v1'; }, modelKey(){ return 'chat_selected_model'; }, lastChatKey(){ return 'chat_last_chat_id'; },\r\n    saveToStorage(){ try { const data=this.chatHistory.map(c=>({...c,createdAt:c.createdAt instanceof Date?c.createdAt.toISOString():c.createdAt,updatedAt:c.updatedAt instanceof Date?c.updatedAt.toISOString():c.updatedAt,promptAppliedAt:c.promptAppliedAt instanceof Date?c.promptAppliedAt.toISOString():c.promptAppliedAt,maxHistoryTurns:c.maxHistoryTurns ?? this.defaultHistoryTurnsMap()[c.promptType||'聊天助手'],messages:c.messages.map(m=>({...m,timestamp:m.timestamp instanceof Date?m.timestamp.toISOString():m.timestamp}))})); localStorage.setItem(this.storageKey(), JSON.stringify(data)); localStorage.setItem(this.modelKey(), JSON.stringify({provider:this.selectedProvider, model:this.selectedModel})); } catch(e){ console.warn('保存聊天记录失败', e);} },\r\n    loadFromStorage(){ try { const raw=localStorage.getItem(this.storageKey()); const savedModel=localStorage.getItem(this.modelKey()); if(savedModel){ try { const sel=JSON.parse(savedModel); if(sel.provider) this.selectedProvider=sel.provider; if(sel.model) this.selectedModel=sel.model; } catch { this.selectedModel=savedModel; } this.ensureModelForProvider(); this.emitModelChanged(); this.loadProviderApiKey(); } else { this.emitModelChanged(); this.loadProviderApiKey(); } if(raw){ const parsed=JSON.parse(raw); this.chatHistory=parsed.map(c=>({...c,createdAt:c.createdAt?new Date(c.createdAt):new Date(),updatedAt:c.updatedAt?new Date(c.updatedAt):new Date(),promptAppliedAt:c.promptAppliedAt?new Date(c.promptAppliedAt):null,promptType:c.promptType||'聊天助手',systemPrompt:this.ensureGlobal(c.systemPrompt||this.promptPresets()['聊天助手']),customPrompt:c.customPrompt||'',maxHistoryTurns:typeof c.maxHistoryTurns==='number'?c.maxHistoryTurns:this.defaultHistoryTurnsMap()[c.promptType||'聊天助手'],messages:(c.messages||[]).map(m=>({...m,timestamp:m.timestamp?new Date(m.timestamp):new Date()})) })); } } catch(e){ console.warn('加载聊天记录失败', e); } },\r\n  saveLastChatId(id){ try { localStorage.setItem(this.lastChatKey(), String(id)); } catch (e) { /* ignore */ } },\r\n    getLastChatId(){ try { return localStorage.getItem(this.lastChatKey()); } catch { return null; } },\r\n    createNewChat(){ const type='聊天助手'; const core=this.promptPresets()[type]; const newChat={ id:Date.now(), title:'新对话', messages:[], createdAt:new Date(), updatedAt:new Date(), promptType:type, systemPrompt:this.composeWithGlobal(core), customPrompt:'', promptAppliedAt:new Date(), maxHistoryTurns:this.defaultHistoryTurnsMap()[type] }; this.chatHistory.unshift(newChat); this.saveToStorage(); this.saveLastChatId(newChat.id); this.$emit('chat-selected', newChat); this.syncPromptUIFromChat(newChat.id); },\r\n    selectChat(id){ const chat=this.chatHistory.find(c=>c.id===id); if(chat){ this.saveLastChatId(id); this.$emit('chat-selected', chat); this.syncPromptUIFromChat(id);} },\r\n    deleteChat(id){ const idx=this.chatHistory.findIndex(c=>c.id===id); if(idx>-1){ this.chatHistory.splice(idx,1); this.saveToStorage(); if(this.currentChatId===id){ this.$emit('chat-deleted', id); if(this.chatHistory.length>0){ this.selectChat(this.chatHistory[0].id);} else { this.createNewChat(); } } } },\r\n    updateChatHistory(chat){ const idx=this.chatHistory.findIndex(c=>c.id===chat.id); if(idx>-1){ const firstUser=chat.messages.find(m=>m.type==='user'); let title=this.chatHistory[idx].title; if(firstUser){ const cand=firstUser.text.substring(0,20)+(firstUser.text.length>20?'...':''); if(title==='新对话'||title===''||title.startsWith('新对话')) title=cand; } const { promptType, systemPrompt, customPrompt, promptAppliedAt }=this.chatHistory[idx]; this.chatHistory[idx]={ ...chat, title, promptType, systemPrompt:this.ensureGlobal(systemPrompt), customPrompt, promptAppliedAt }; this.saveToStorage(); } },\r\n    applyPrompt(){ if(!this.currentChatId) return; const chat=this.chatHistory.find(c=>c.id===this.currentChatId); if(!chat) return; chat.promptType=this.promptTypeSelection; if(this.promptTypeSelection==='自定义'){ chat.customPrompt=this.promptEditorContent.trim(); chat.systemPrompt=this.composeWithGlobal(chat.customPrompt); } else { const core=this.promptPresets()[this.promptTypeSelection]; chat.systemPrompt=this.composeWithGlobal(core); } chat.maxHistoryTurns=Number.isFinite(this.maxHistoryInput)? Math.max(0,Math.min(100,this.maxHistoryInput)) : this.defaultHistoryTurnsMap()[chat.promptType]; chat.promptAppliedAt=new Date(); chat.updatedAt=new Date(); this.currentChatPromptAppliedAt=chat.promptAppliedAt; this.saveToStorage(); this.$emit('chat-selected', { ...chat }); },\r\n    onPromptTypeChange(){ if(this.promptTypeSelection==='自定义'){ const chat=this.chatHistory.find(c=>c.id===this.currentChatId); this.promptEditorContent=chat? (chat.customPrompt || this.promptEditorContent || '') : (this.promptEditorContent||''); } else { this.promptEditorContent=this.promptPresets()[this.promptTypeSelection]; } this.maxHistoryInput=this.defaultHistoryTurnsMap()[this.promptTypeSelection]; },\r\n    syncPromptUIFromChat(id){ const chat=this.chatHistory.find(c=>c.id===id); if(!chat) return; this.promptTypeSelection=chat.promptType||'聊天助手'; if(this.promptTypeSelection==='自定义'){ this.promptEditorContent=chat.customPrompt||''; } else { const core=this.promptPresets()[this.promptTypeSelection]; this.promptEditorContent=core; } this.maxHistoryInput= typeof chat.maxHistoryTurns==='number'? chat.maxHistoryTurns : this.defaultHistoryTurnsMap()[this.promptTypeSelection]; this.currentChatPromptAppliedAt=chat.promptAppliedAt||null; },\r\n    formatTime(date){ const d=date instanceof Date? date : new Date(date); const now=new Date(); const diff=now-d; const m=Math.floor(diff/60000); const h=Math.floor(diff/3600000); const day=Math.floor(diff/86400000); if(m<1) return '刚刚'; if(m<60) return `${m}分钟前`; if(h<24) return `${h}小时前`; if(day<7) return `${day}天前`; return d.toLocaleDateString(); }\r\n  ,\r\n  // 面板折叠\r\n  togglePanel(){ this.panelCollapsed = !this.panelCollapsed; }\r\n  },\r\n  mounted(){ this.loadFromStorage(); if(this.chatHistory.length===0){ this.createNewChat(); } else { const lastId=this.getLastChatId(); const toSelect=this.chatHistory.find(c=>String(c.id)===String(lastId))||this.chatHistory[0]; this.$emit('chat-selected', toSelect); this.syncPromptUIFromChat(toSelect.id); } window.addEventListener('beforeunload', this.saveToStorage); },\r\n  beforeUnmount(){ window.removeEventListener('beforeunload', this.saveToStorage); }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 保留原有基础样式（部分调整适应折叠与新增区域） */\r\n .setting-panel { width:300px; height:100vh; background:#f8f9fa; border-right:1px solid #e5e5e5; display:flex; flex-direction:column; flex-shrink:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; overflow:hidden; position:relative; transition:width .28s cubic-bezier(.4,0,.2,1); }\r\n .setting-panel.panel-collapsed { width:42px; }\r\n/* 让头部固定，滚动时始终可见 */\r\n .panel-header { padding:12px 8px 12px 16px; border-bottom:1px solid #e5e5e5; background:#fff; position:sticky; top:0; z-index:20; display:flex; align-items:center; justify-content:space-between; gap:8px; }\r\n .panel-header .panel-title { margin:0; font-size:20px; font-weight:600; color:#2d3748; white-space:nowrap; opacity:1; transform:translateX(0); transition:opacity .2s, transform .28s; }\r\n .panel-header .panel-title.hidden { opacity:0; transform:translateX(-8px); pointer-events:none; }\r\n .panel-toggle-btn { width:28px; height:28px; border:none; background:transparent; border-radius:6px; cursor:pointer; display:flex; align-items:center; justify-content:center; padding:0; position:relative; transition:background .18s, box-shadow .18s; }\r\n .panel-toggle-btn:hover { background:rgba(0,0,0,.06); }\r\n .panel-toggle-btn:active { background:rgba(0,0,0,.12); }\r\n .panel-toggle-btn:focus-visible { outline:none; box-shadow:0 0 0 2px #93c5fd; }\r\n .panel-toggle-btn .icon { display:inline-block; font-size:14px; line-height:1; transform:rotate(180deg); transition:transform .28s cubic-bezier(.4,0,.2,1); color:#64748b; }\r\n .panel-toggle-btn .icon.collapsed { transform:rotate(0deg); }\r\n .panel-body { flex:1; overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch; }\r\n /* 主体淡入淡出 */\r\n .panel-body-fade-enter-from, .panel-body-fade-leave-to { opacity:0; transform:translateX(-8px); }\r\n .panel-body-fade-enter-active, .panel-body-fade-leave-active { transition:opacity .18s ease, transform .25s ease; }\r\n /* 折叠状态专用布局，保证按钮可见 */\r\n .setting-panel.panel-collapsed .panel-header { padding:8px 6px; justify-content:center; }\r\n .setting-panel.panel-collapsed .panel-toggle-btn { position:relative; right:auto; top:auto; width:30px; height:30px; }\r\n .setting-panel.panel-collapsed .panel-toggle-btn .icon { transform:rotate(0deg); }\r\n .setting-panel.panel-collapsed .panel-toggle-btn .icon.collapsed { transform:rotate(0deg); }\r\n /* 隐藏标题占位避免挤压按钮 */\r\n .setting-panel.panel-collapsed .panel-title { display:none; }\r\n\r\n.collapsible-section { background:#fff; border-bottom:1px solid #e5e5e5; display:flex; flex-direction:column; }\r\n.section-header { display:flex; align-items:center; padding:16px 20px; user-select:none; }\r\n.section-header.clickable { cursor:pointer; }\r\n.section-title { display:flex; align-items:center; gap:6px; }\r\n.section-header h3 { margin:0; font-size:16px; font-weight:600; color:#4a5568; text-transform:uppercase; letter-spacing:.5px; }\r\n.arrow { display:inline-block; font-size:14px; transition:transform .2s; color:#6b7280; }\r\n.arrow.open { transform:rotate(90deg); }\r\n.section-body { padding:0 20px 16px 20px; }\r\n.collapsible-section.collapsed .section-body { display:none; }\r\n\r\n.model-select-wrapper { position:relative; margin-top:8px; }\r\n.model-select { width:100%; padding:12px 40px 12px 12px; border:1px solid #e2e8f0; border-radius:8px; font-size:14px; color:#2d3748; background:#fff; cursor:pointer; appearance:none; transition:.2s; }\r\n.model-select:hover { border-color:#10a37f; }\r\n.model-select:focus { outline:none; border-color:#10a37f; box-shadow:0 0 0 3px rgba(16,163,127,.1); }\r\n.select-arrow { position:absolute; right:12px; top:50%; transform:translateY(-50%); pointer-events:none; color:#6b7280; }\r\n\r\n/* Prompt 区域 */\r\n.prompt-toolbar { display:flex; gap:8px; align-items:center; margin-top:12px;}\r\n.prompt-type-select-wrapper { flex:1; }\r\n.prompt-type-select { width:100%; padding:6px 8px; border:1px solid #e2e8f0; border-radius:6px; font-size:14px; background:#fff; cursor:pointer; }\r\n.prompt-editor-wrapper { margin-top:12px; display:flex; flex-direction:column; gap:8px; }\r\n.prompt-editor { width:100%; min-height:120px; resize:vertical; padding:10px 12px; font-size:14px; line-height:1.5; border:1px solid #e2e8f0; border-radius:8px; background:#fdfdfd; font-family:monospace; }\r\n.prompt-editor[readonly] { background:#f5f7fa; color:#4a5568; }\r\n.prompt-actions { display:flex; align-items:center; gap:12px; }\r\n.apply-prompt-btn { padding:6px 14px; background:#2563eb; border:none; color:#fff; font-size:14px; border-radius:6px; cursor:pointer; transition:.2s; }\r\n.apply-prompt-btn:hover:not(:disabled) { background:#1d4ed8; }\r\n.apply-prompt-btn:disabled { background:#93c5fd; cursor:not-allowed; }\r\n.prompt-status { font-size:12px; color:#6b7280; }\r\n\r\n.history-turns-row { display:flex; align-items:center; gap:8px; font-size:12px; color:#4b5563; }\r\n.history-turns-row label { font-weight:600; }\r\n.history-turns-row input { width:70px; padding:4px 6px; border:1px solid #e2e8f0; border-radius:6px; font-size:12px; }\r\n.history-turns-row .hint { color:#9ca3af; font-size:11px; }\r\n\r\n/* 聊天列表 */\r\n.chat-list { flex:1; overflow-y:auto; padding:8px; max-height:300px; }\r\n.chat-item { display:flex; flex-direction:column; padding:12px; margin-bottom:4px; border-radius:8px; cursor:pointer; transition:background .2s; position:relative; background:#fff; border:1px solid transparent; }\r\n.chat-item:hover { background:#f8f9fa; border-color:#e5e5e5; }\r\n.chat-item.active { background:#ecfdf5; border-color:#10a37f; }\r\n.chat-title { font-size:14px; font-weight:500; color:#2d3748; margin-bottom:4px; line-height:1.3; }\r\n.chat-time { font-size:12px; color:#6b7280; }\r\n.delete-btn { position:absolute; top:8px; right:8px; width:20px; height:20px; background:transparent; border:none; border-radius:4px; color:#9ca3af; cursor:pointer; display:flex; align-items:center; justify-content:center; opacity:0; transition:.2s; }\r\n.chat-item:hover .delete-btn { opacity:1; }\r\n.delete-btn:hover { background:#fee2e2; color:#dc2626; }\r\n.empty-state { display:flex; justify-content:center; align-items:center; height:100px; color:#9ca3af; font-size:14px; }\r\n.chat-list::-webkit-scrollbar { width:4px; }\r\n.chat-list::-webkit-scrollbar-track { background:transparent; }\r\n.chat-list::-webkit-scrollbar-thumb { background:#d1d5db; border-radius:2px; }\r\n.chat-list::-webkit-scrollbar-thumb:hover { background:#9ca3af; }\r\n\r\n.api-key-wrapper { margin-top:12px; display:flex; flex-direction:column; gap:6px; }\r\n.api-key-wrapper.invalid input { border-color:#dc2626; }\r\n.api-key-input-row { display:flex; gap:8px; align-items:center; }\r\n.api-key-input-row input { flex:1; padding:8px 10px; border:1px solid #e2e8f0; border-radius:6px; font-size:12px; }\r\n.save-key-btn, .toggle-key-btn { padding:6px 10px; background:#10a37f; color:#fff; border:none; border-radius:6px; font-size:12px; cursor:pointer; }\r\n.save-key-btn:disabled { background:#9ca3af; cursor:not-allowed; }\r\n.api-key-hint { font-size:12px; color:#dc2626; }\r\n.api-key-hint.ok { color:#16a34a; }\r\n.field-label { display:block; font-size:12px; font-weight:600; color:#4a5568; margin-bottom:4px; }\r\n\r\n@media (max-width:768px){\r\n  .setting-panel { width:260px; }\r\n  .setting-panel.panel-collapsed { width:40px; }\r\n  .section-header { padding:14px 16px; }\r\n  .section-body { padding:0 16px 14px 16px; }\r\n  .chat-list { max-height:240px; }\r\n}\r\n</style>\r\n","import { render } from \"./setting_panel.vue?vue&type=template&id=7f7128ed&scoped=true\"\nimport script from \"./setting_panel.vue?vue&type=script&lang=js\"\nexport * from \"./setting_panel.vue?vue&type=script&lang=js\"\n\nimport \"./setting_panel.vue?vue&type=style&index=0&id=7f7128ed&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7f7128ed\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=16f4c4a6\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=16f4c4a6&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_vue_demo\"] = self[\"webpackChunkmy_vue_demo\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4812); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","_createVNode","_component_SettingPanel","currentChatId","$data","onModelChanged","$options","handleModelChange","onChatSelected","handleChatSelected","onChatDeleted","handleChatDeleted","ref","_component_ChatBox","currentChat","selectedModel","onChatUpdated","handleChatUpdated","onNewChat","handleCreateNewChat","class","width","height","viewBox","fill","_createElementVNode","_hoisted_2","_toDisplayString","currentModel","currentChatTitle","_hoisted_3","onClick","_cache","args","toggleDebug","_normalizeClass","active","showDebug","d","stroke","clearChat","_hoisted_4","messages","length","_hoisted_5","_Fragment","_renderList","message","key","type","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","isTyping","_hoisted_11","innerHTML","renderedMessage","text","_hoisted_13","_hoisted_14","$event","_ctx","$emit","_hoisted_15","currentMessage","onKeydown","handleKeydown","onInput","adjustTextareaHeight","placeholder","rows","disabled","isLoading","sendMessage","trim","_hoisted_19","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22","currentSystemPrompt","_hoisted_24","_hoisted_25","formattedLastRequest","_hoisted_26","_hoisted_27","lastResponseRaw","_hoisted_28","lastResponseText","PROVIDER_STORAGE_KEY","p","getApiKey","provider","localStorage","getItem","isApiKeyValid","k","getProviderConfig","name","apiUrl","defaultParams","temperature","max_tokens","buildChatPayload","model","maxTokens","cfg","buildAuthHeaders","isConfigReady","window","MathJax","tex","inlineMath","displayMath","processEscapes","tags","options","skipHtmlTags","ignoreHtmlClass","startup","typeset","console","log","DOMPurify","setConfig","USE_PROFILES","html","e","props","Object","default","String","data","lastRequestPayload","md","mathJaxReady","mjTypesetTimer","computed","raw","this","includes","split","slice","join","toUpperCase","title","systemPrompt","JSON","stringify","watch","handler","newChat","$nextTick","scrollToBottom","immediate","created","MarkdownIt","linkify","breaks","highlight","str","lang","hljs","getLanguage","out","language","ignoreIllegals","value","use","markdownItTaskLists","enabled","markdownItMultiMdTable","multiline","rowspan","headerless","mounted","loadMathJax","_codeCopyHandler","handleCodeCopyClick","$refs","messagesContainer","addEventListener","beforeUnmount","removeEventListener","updated","scheduleMathTypeset","enhanceCodeBlocks","methods","storageKey","persistCurrentChat","arr","parse","idx","findIndex","c","map","m","timestamp","Date","toISOString","updatedAt","setItem","warn","userMessage","now","push","aiMessage","response","callOpenAI","pop","error","updateCurrentChat","updatedChat","parts","conversationHistory","buildConversationHistory","payload","providerCfg","fetch","method","headers","body","ok","Error","status","json","content","choices","history","role","maxTurns","maxHistoryTurns","filtered","filter","lastUserMessage","i","completedTurns","assistantMsg","j","selected","flat","event","ctrlKey","metaKey","preventDefault","textarea","messageInput","closest","classList","contains","style","Math","min","scrollHeight","typesetPromise","scriptId","document","getElementById","s","createElement","async","src","onload","onerror","head","appendChild","clearTimeout","setTimeout","typesetMath","root","targets","querySelectorAll","Array","from","catch","err","rendered","render","sanitize","blocks","forEach","codeEl","preEl","parentElement","dataset","enhanced","langClass","find","startsWith","replace","toLowerCase","wrapper","className","setAttribute","header","langSpan","textContent","copyBtn","add","parentNode","insertBefore","btn","target","code","querySelector","original","innerText","navigator","clipboard","writeText","then","remove","container","scrollTop","__exports__","panelCollapsed","hidden","togglePanel","collapsed","_Transition","toggleCollapse","open","selectedProvider","onChange","onProviderChange","providers","label","onModelChange","filteredModels","description","invalid","providerKeyValid","currentProviderLabel","showApiKey","apiKeyInput","onApiKeyInput","saveCurrentApiKey","apiKeyDirty","prompt","_hoisted_16","_hoisted_17","promptTypeSelection","onPromptTypeChange","promptTypeOptions","opt","promptEditorContent","readonly","_hoisted_23","max","maxHistoryInput","number","applyPrompt","$props","currentChatPromptAppliedAt","formatTime","_hoisted_29","chatHistory","chat","selectChat","_hoisted_31","_hoisted_32","_withModifiers","deleteChat","_hoisted_34","Number","models","n","syncPromptUIFromChat","ensureModelForProvider","loadProviderApiKey","isApiKeyValidRaw","providerStorageKey","emitModelChanged","first","saveToStorage","globalPromptPrefix","composeWithGlobal","core","g","ensureGlobal","promptPresets","defaultHistoryTurnsMap","modelKey","lastChatKey","createdAt","promptAppliedAt","promptType","loadFromStorage","savedModel","sel","parsed","customPrompt","saveLastChatId","getLastChatId","createNewChat","unshift","splice","updateChatHistory","firstUser","cand","substring","isFinite","date","diff","floor","h","day","toLocaleDateString","lastId","toSelect","components","ChatBox","SettingPanel","chatId","settingPanel","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","keys","every","r","getter","__esModule","a","definition","o","defineProperty","enumerable","get","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}