{"version":3,"file":"js/app.b62f2972.js","mappings":"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","sources":["webpack://my-vue-demo/./src/App.vue","webpack://my-vue-demo/./src/components/chat_box.vue","webpack://my-vue-demo/./src/config/openai.js","webpack://my-vue-demo/./src/components/chat_box.vue?83d4","webpack://my-vue-demo/./src/components/setting_panel.vue","webpack://my-vue-demo/./src/components/setting_panel.vue?f5cd","webpack://my-vue-demo/./src/App.vue?7ccd","webpack://my-vue-demo/./src/main.js","webpack://my-vue-demo/webpack/bootstrap","webpack://my-vue-demo/webpack/runtime/chunk loaded","webpack://my-vue-demo/webpack/runtime/compat get default export","webpack://my-vue-demo/webpack/runtime/define property getters","webpack://my-vue-demo/webpack/runtime/global","webpack://my-vue-demo/webpack/runtime/hasOwnProperty shorthand","webpack://my-vue-demo/webpack/runtime/make namespace object","webpack://my-vue-demo/webpack/runtime/jsonp chunk loading","webpack://my-vue-demo/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <SettingPanel \n      :currentChatId=\"currentChatId\"\n      @model-changed=\"handleModelChange\"\n      @chat-selected=\"handleChatSelected\"\n      @chat-deleted=\"handleChatDeleted\"\n      ref=\"settingPanel\"\n    />\n    <ChatBox \n      :currentChat=\"currentChat\"\n      :selectedModel=\"selectedModel\"\n      @chat-updated=\"handleChatUpdated\"\n  @new-chat=\"handleCreateNewChat\"\n    />\n  </div>\n</template>\n\n<script>\nimport ChatBox from './components/chat_box.vue'\nimport SettingPanel from './components/setting_panel.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    ChatBox,\n    SettingPanel\n  },\n  data() {\n    return {\n      selectedModel: 'openai:gpt-4.1',\n      currentChat: null,\n      currentChatId: null\n    }\n  },\n  methods: {\n    handleModelChange(model) {\n      this.selectedModel = model;\n    },\n    \n    handleChatSelected(chat) {\n      this.currentChat = chat;\n      this.currentChatId = chat.id;\n    },\n    \n    handleChatDeleted(chatId) {\n      if (this.currentChatId === chatId) {\n        this.currentChat = null;\n        this.currentChatId = null;\n      }\n    },\n    \n    handleChatUpdated(chat) {\n      this.currentChat = chat;\n      if (this.$refs.settingPanel) {\n        this.$refs.settingPanel.updateChatHistory(chat);\n      }\n    },\n    handleCreateNewChat() {\n      if (this.$refs.settingPanel && this.$refs.settingPanel.createNewChat) {\n        this.$refs.settingPanel.createNewChat();\n      }\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml, body {\n  height: 100%;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  /* 全局基础字号：原先未设置，默认约 14px/16px，这里放大 3px */\n  font-size: 17px;\n}\n\n#app {\n  height: 100vh;\n  display: flex;\n  flex-direction: row;\n  overflow: hidden; /* 防止整体滚动 */\n  width: 100%; /* 确保占满整个宽度 */\n}\n</style>\n","<template>\r\n  <div class=\"chat-container\">\r\n    <!-- 顶部标题栏 -->\r\n    <div class=\"chat-header\">\r\n      <h1>{{ currentModel }} - {{ currentChatTitle }}</h1>\r\n      <div class=\"header-actions\">\r\n        <button @click=\"toggleDebug\" class=\"debug-button\" :class=\"{active: showDebug}\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M3 4h18M3 12h18M3 20h18\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          Debug\r\n        </button>\r\n        <button @click=\"clearChat\" class=\"clear-button\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          清空对话\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天消息区域 -->\r\n    <div class=\"chat-messages\" ref=\"messagesContainer\">\r\n      <div v-if=\"messages.length === 0\" class=\"welcome-message\">\r\n        <div class=\"welcome-content\">\r\n          <h2>Hello! I'm ChatGPT</h2>\r\n          <p>我是一个AI助手，很高兴为您服务。请问有什么可以帮助您的吗？</p>\r\n        </div>\r\n      </div>\r\n      \r\n      <div \r\n        v-for=\"message in messages\" \r\n        :key=\"message.id\"\r\n        :class=\"['message-wrapper', message.type]\"\r\n      >\r\n        <div class=\"message-content\">\r\n          <div class=\"avatar\">\r\n            <div v-if=\"message.type === 'user'\" class=\"user-avatar\">U</div>\r\n            <div v-else class=\"ai-avatar\">\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div class=\"message-text\">\r\n            <div v-if=\"message.type === 'assistant' && message.isTyping\" class=\"typing-indicator\">\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </div>\r\n            <div v-else v-html=\"renderedMessage(message.text)\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 输入区域 -->\r\n    <div class=\"chat-input-container\">\r\n      <div class=\"chat-input-toolbar\">\r\n        <button class=\"new-chat-btn\" @click=\"$emit('new-chat')\">\r\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M12 5v14M5 12h14\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n          </svg>\r\n          新对话\r\n        </button>\r\n  </div>\r\n  <div class=\"input-wrapper fill\">\r\n        <textarea \r\n          v-model=\"currentMessage\"\r\n          @keydown=\"handleKeydown\"\r\n          @input=\"adjustTextareaHeight\"\r\n          placeholder=\"Ctrl+Enter 发送 (Mac: Cmd+Enter)...\"\r\n          class=\"message-input\"\r\n          rows=\"1\"\r\n          :disabled=\"isLoading\"\r\n          ref=\"messageInput\"\r\n        ></textarea>\r\n        <button \r\n          @click=\"sendMessage\"\r\n          :disabled=\"!currentMessage.trim() || isLoading\"\r\n          class=\"send-button\"\r\n        >\r\n          <svg v-if=\"!isLoading\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n            <path d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 11L11 13\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          </svg>\r\n          <div v-else class=\"loading-spinner\"></div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Debug Panel -->\r\n    <div v-if=\"showDebug\" class=\"debug-panel\">\r\n      <div class=\"debug-header\">\r\n        <span>Debug 信息</span>\r\n        <button class=\"close-btn\" @click=\"toggleDebug\">×</button>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>当前系统 Prompt</h4>\r\n        <pre class=\"debug-pre\" v-text=\"currentSystemPrompt || '（无）'\"></pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次请求 Payload (已脱敏)</h4>\r\n        <pre class=\"debug-pre\">{{ formattedLastRequest }}</pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次原始响应 JSON</h4>\r\n        <pre class=\"debug-pre\">{{ lastResponseRaw }}</pre>\r\n      </div>\r\n      <div class=\"debug-section\">\r\n        <h4>最后一次生成文本</h4>\r\n        <pre class=\"debug-pre\" v-text=\"lastResponseText || '（无）'\"></pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProviderConfig, buildChatPayload, buildAuthHeaders, isConfigReady } from '@/config/openai.js'\r\nimport MarkdownIt from 'markdown-it'\r\nimport hljs from 'highlight.js'\r\nimport 'highlight.js/styles/github-dark.min.css'\r\nimport markdownItTaskLists from 'markdown-it-task-lists'\r\nimport markdownItMultiMdTable from 'markdown-it-multimd-table'\r\nimport DOMPurify from 'dompurify'\r\n\r\n// MathJax 配置（需在脚本加载前放入 window）\r\nif (!window.MathJax) {\r\n  window.MathJax = {\r\n    tex: {\r\n      inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],\r\n      displayMath: [['$$','$$'], ['\\\\[','\\\\]']],\r\n      processEscapes: true,\r\n      tags: 'none'\r\n    },\r\n    options: {\r\n      skipHtmlTags: ['script','noscript','style','textarea','pre','code'],\r\n      ignoreHtmlClass: 'tex2jax_ignore' // 移除 processHtmlClass，避免阻止解析\r\n    },\r\n    startup: { typeset: false } // 我们手动调用\r\n  };\r\n  console.log('[MathJax] config injected');\r\n}\r\n\r\n// 允许 MathML（保留原 DOMPurify 配置，MathJax v3 默认输出 <mjx-container> 内部安全）\r\ntry {\r\n  DOMPurify.setConfig({\r\n    USE_PROFILES: { html: true },\r\n  });\r\n} catch(e) { /* 忽略 */ }\r\n\r\nexport default {\r\n  name: 'ChatBox',\r\n  props: {\r\n    currentChat: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    selectedModel: {\r\n      type: String,\r\n      default: 'gpt-4.1'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentMessage: '',\r\n      messages: [],\r\n      isLoading: false,\r\n      // Debug 相关\r\n      showDebug: false,\r\n      lastRequestPayload: null,\r\n      lastResponseRaw: '',\r\n      lastResponseText: '',\r\n      md: null,\r\n      mathJaxReady: false,\r\n      mjTypesetTimer: null // 重命名，避免以 _ 开头\r\n    }\r\n  },\r\n  computed: {\r\n    currentModel() {\r\n      const raw = this.selectedModel || '';\r\n      const model = raw.includes(':') ? raw.split(':').slice(1).join(':') : raw;\r\n      return model.toUpperCase();\r\n    },\r\n    currentChatTitle() {\r\n      return this.currentChat ? this.currentChat.title : '新对话';\r\n    },\r\n    currentSystemPrompt() {\r\n      return this.currentChat && this.currentChat.systemPrompt ? this.currentChat.systemPrompt : '';\r\n    },\r\n    formattedLastRequest() {\r\n      if (!this.lastRequestPayload) return '（无）';\r\n      try { return JSON.stringify(this.lastRequestPayload, null, 2); } catch { return '（格式化失败）'; }\r\n    }\r\n  },\r\n  watch: {\r\n    currentChat: {\r\n      handler(newChat) {\r\n        if (newChat) {\r\n          this.messages = [...newChat.messages];\r\n          this.$nextTick(() => {\r\n            this.scrollToBottom();\r\n          });\r\n        } else {\r\n          this.messages = [];\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  created() {\r\n    this.md = new MarkdownIt({\r\n      html: false,\r\n      linkify: true,\r\n      breaks: true,\r\n      highlight: (str, lang) => {\r\n        if (lang && hljs.getLanguage(lang)) {\r\n          try {\r\n            const out = hljs.highlight(str, { language: lang, ignoreIllegals: true }).value;\r\n            return `<pre class=\"hljs\"><code class=\"language-${lang}\">${out}</code></pre>`;\r\n          } catch (e) { /* ignore */ }\r\n        }\r\n        return `<pre class=\"hljs\"><code>${this.md.utils.escapeHtml(str)}</code></pre>`; // 去除多余转义\r\n      }\r\n    })\r\n      .use(markdownItTaskLists, { enabled: true })\r\n      .use(markdownItMultiMdTable, { multiline: true, rowspan: true, headerless: true });\r\n\r\n    const defaultFence = this.md.renderer.rules.fence;\r\n    this.md.renderer.rules.fence = (tokens, idx, options, env, self) => {\r\n      const token = tokens[idx];\r\n      const lang = (token.info || '').trim();\r\n      const codeHtml = defaultFence ? defaultFence(tokens, idx, options, env, self) : `<pre class=\"hljs\"><code>${this.md.utils.escapeHtml(token.content)}</code></pre>`; // 去除多余转义\r\n      return `<div class=\"code-block-wrapper\"><div class=\"code-block-header\"><span>${lang || 'code'}</span><button class=\"copy-btn\" data-code=\"${encodeURIComponent(token.content)}\">复制</button></div>${codeHtml}</div>`; // 去除多余转义\r\n    };\r\n  },\r\n  mounted() {\r\n    // 代码复制事件委托\r\n    this.$el.addEventListener('click', (e) => {\r\n      const btn = e.target.closest('.copy-btn');\r\n      if (btn) {\r\n        const raw = decodeURIComponent(btn.getAttribute('data-code') || '');\r\n        navigator.clipboard.writeText(raw).then(() => {\r\n          btn.innerText = '已复制';\r\n          setTimeout(() => (btn.innerText = '复制'), 1500);\r\n        });\r\n      }\r\n    });\r\n    this.loadMathJax();\r\n  },\r\n  updated() {\r\n    // 组件更新后尝试排版数学\r\n    this.scheduleMathTypeset();\r\n  },\r\n  methods: {\r\n    storageKey() { return 'chat_history_v1'; },\r\n\r\n    persistCurrentChat() {\r\n      // 仅更新当前对话在 localStorage 中的内容（SettingPanel 已整体保存）\r\n      try {\r\n        const raw = localStorage.getItem(this.storageKey());\r\n        if (!raw) return;\r\n        const arr = JSON.parse(raw);\r\n        if (!this.currentChat) return;\r\n        const idx = arr.findIndex(c => String(c.id) === String(this.currentChat.id));\r\n        if (idx > -1) {\r\n          arr[idx].messages = this.messages.map(m => ({\r\n            ...m,\r\n            timestamp: m.timestamp instanceof Date ? m.timestamp.toISOString() : m.timestamp\r\n          }));\r\n          arr[idx].updatedAt = new Date().toISOString();\r\n          localStorage.setItem(this.storageKey(), JSON.stringify(arr));\r\n        }\r\n      } catch(e) {\r\n        console.warn('持久化当前对话失败', e);\r\n      }\r\n    },\r\n\r\n    async sendMessage() {\r\n      if (!this.currentMessage.trim() || this.isLoading) return;\r\n      const userMessage = {\r\n        id: Date.now(),\r\n        text: this.currentMessage.trim(),\r\n        type: 'user',\r\n        timestamp: new Date()\r\n      };\r\n      this.messages.push(userMessage);\r\n      this.currentMessage = '';\r\n      this.adjustTextareaHeight();\r\n      this.scrollToBottom();\r\n      this.persistCurrentChat();\r\n      const aiMessage = {\r\n        id: Date.now() + 1,\r\n        text: '',\r\n        type: 'assistant',\r\n        timestamp: new Date(),\r\n        isTyping: true\r\n      };\r\n      this.messages.push(aiMessage);\r\n      this.scrollToBottom();\r\n      this.persistCurrentChat();\r\n      try {\r\n        this.isLoading = true;\r\n        const response = await this.callOpenAI();\r\n        this.messages.pop();\r\n        this.messages.push({\r\n          id: Date.now() + 2,\r\n            text: response,\r\n            type: 'assistant',\r\n            timestamp: new Date(),\r\n            isTyping: false\r\n        });\r\n      } catch (error) {\r\n        console.error('OpenAI API Error:', error);\r\n        this.messages.pop();\r\n        this.messages.push({\r\n          id: Date.now() + 2,\r\n          text: '抱歉，我现在无法回复。请稍后再试。',\r\n          type: 'assistant',\r\n          timestamp: new Date(),\r\n          isTyping: false\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n        this.scrollToBottom();\r\n        this.updateCurrentChat();\r\n        this.persistCurrentChat();\r\n      }\r\n    },\r\n    \r\n    updateCurrentChat() {\r\n      if (this.currentChat) {\r\n        const updatedChat = {\r\n          ...this.currentChat,\r\n          messages: [...this.messages],\r\n          updatedAt: new Date()\r\n        };\r\n        this.$emit('chat-updated', updatedChat);\r\n      }\r\n    },\r\n    \r\n    async callOpenAI() {\r\n      // selectedModel 现在可能是 \"provider:model\" 或仅 model\r\n      let provider = 'openai';\r\n      let model = this.selectedModel;\r\n      if (this.selectedModel.includes(':')) {\r\n        const parts = this.selectedModel.split(':');\r\n        provider = parts[0];\r\n        model = parts.slice(1).join(':');\r\n      }\r\n      if (!isConfigReady(provider)) {\r\n        return `未检测到 ${provider} 的有效 API Key，请在设置面板填写后再试。`;\r\n      }\r\n      const conversationHistory = this.buildConversationHistory();\r\n      const payload = buildChatPayload({ provider, model, messages: conversationHistory });\r\n      this.lastRequestPayload = { provider, ...payload };\r\n      const providerCfg = getProviderConfig(provider);\r\n      const response = await fetch(providerCfg.apiUrl, {\r\n        method: 'POST',\r\n        headers: buildAuthHeaders(provider),\r\n        body: JSON.stringify(payload)\r\n      });\r\n      if (!response.ok) { throw new Error(`API request failed: ${response.status}`); }\r\n      const data = await response.json();\r\n      this.lastResponseRaw = JSON.stringify(data, null, 2);\r\n      const content = data.choices && data.choices[0] && data.choices[0].message ? data.choices[0].message.content : '';\r\n      this.lastResponseText = content;\r\n      return content;\r\n    },\r\n    \r\n    buildConversationHistory() {\r\n      const history = [];\r\n      if (this.currentSystemPrompt) {\r\n        history.push({ role: 'system', content: this.currentSystemPrompt });\r\n      }\r\n      // 读取当前聊天的最大轮数配置（轮=用户+AI）\r\n      let maxTurns = 20;\r\n      if (this.currentChat && typeof this.currentChat.maxHistoryTurns === 'number') {\r\n        maxTurns = this.currentChat.maxHistoryTurns;\r\n      }\r\n      const filtered = this.messages.filter(m => !m.isTyping);\r\n      if (filtered.length === 0) {\r\n        return history;\r\n      }\r\n      // 当前最后一条用户消息（刚发送，尚无 assistant 回复）\r\n      const lastUserMessage = (() => {\r\n        for (let i = filtered.length - 1; i >= 0; i--) {\r\n          if (filtered[i].type === 'user') return filtered[i];\r\n          if (filtered[i].type === 'assistant') break; // 遇到 assistant 说明最后一条用户消息已有回复\r\n        }\r\n        return null;\r\n      })();\r\n      // 构建已完成轮（user + assistant）\r\n      const completedTurns = [];\r\n      for (let i = 0; i < filtered.length; i++) {\r\n        const m = filtered[i];\r\n        if (m.type === 'user') {\r\n          let assistantMsg = null;\r\n          for (let j = i + 1; j < filtered.length; j++) {\r\n            if (filtered[j].type === 'assistant') { assistantMsg = filtered[j]; break; }\r\n            if (filtered[j].type === 'user') break; // 下一个 user 开始新轮\r\n          }\r\n          // 如果此 user 是最后一个用户消息且没有 assistant 回复，则视为未完成，跳出（不加入已完成轮）\r\n          if (!assistantMsg && lastUserMessage && lastUserMessage === m) {\r\n            break;\r\n          }\r\n          completedTurns.push([\r\n            { role: 'user', content: m.text },\r\n            ...(assistantMsg ? [{ role: 'assistant', content: assistantMsg.text }] : [])\r\n          ]);\r\n        }\r\n      }\r\n      if (maxTurns === 0) {\r\n        // 只带系统 + 当前最后用户输入\r\n        if (lastUserMessage) {\r\n          history.push({ role: 'user', content: lastUserMessage.text });\r\n        }\r\n        return history;\r\n      }\r\n      // 取最后 maxTurns 轮\r\n      const selected = completedTurns.slice(-maxTurns).flat();\r\n      history.push(...selected);\r\n      if (lastUserMessage) {\r\n        history.push({ role: 'user', content: lastUserMessage.text });\r\n      }\r\n      return history;\r\n    },\r\n    \r\n    handleKeydown(event) {\r\n      // Ctrl+Enter 或 Cmd+Enter 发送，其它 Enter 默认换行\r\n      if (event.key === 'Enter' && (event.ctrlKey || event.metaKey)) {\r\n        event.preventDefault();\r\n        this.sendMessage();\r\n      }\r\n    },\r\n    \r\n    adjustTextareaHeight() {\r\n      this.$nextTick(() => {\r\n        const textarea = this.$refs.messageInput;\r\n        if (!textarea) return;\r\n        // 填充模式下（输入区域占满剩余空间）不做自适应高度挤压，只允许内部滚动\r\n        if (textarea.closest('.input-wrapper')?.classList.contains('fill')) {\r\n          textarea.style.height = '100%';\r\n          return;\r\n        }\r\n        textarea.style.height = 'auto';\r\n        textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\r\n      });\r\n    },\r\n    \r\n    loadMathJax() {\r\n      if (window.MathJax?.typesetPromise) {\r\n        this.mathJaxReady = true;\r\n        this.scheduleMathTypeset();\r\n        return;\r\n      }\r\n      const scriptId = 'mathjax-script';\r\n      if (document.getElementById(scriptId)) return; // 正在加载\r\n      const s = document.createElement('script');\r\n      s.id = scriptId;\r\n      s.async = true;\r\n      s.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';\r\n      s.onload = () => {\r\n        this.mathJaxReady = true;\r\n        this.scheduleMathTypeset();\r\n      };\r\n      s.onerror = () => console.warn('MathJax 加载失败');\r\n      document.head.appendChild(s);\r\n    },\r\n    scheduleMathTypeset() {\r\n      if (!this.mathJaxReady) return;\r\n      if (this.mjTypesetTimer) clearTimeout(this.mjTypesetTimer);\r\n      this.mjTypesetTimer = setTimeout(() => this.typesetMath(), 40);\r\n    },\r\n    typesetMath() {\r\n      if (!this.mathJaxReady || !window.MathJax?.typesetPromise) return;\r\n      const root = this.$refs.messagesContainer;\r\n      if (!root) return;\r\n      // 只对 message-text 内部进行 typeset，避免重复处理 code block\r\n      const targets = root.querySelectorAll('.message-text');\r\n      window.MathJax.typesetPromise(Array.from(targets)).catch(err => console.warn('MathJax typeset 错误', err));\r\n    },\r\n    renderedMessage(text) {\r\n      if (!this.md) return text;\r\n      const rendered = this.md.render(text);\r\n      // 包一层便于调试（可在 Elements 里搜索 mjx-container 是否插入）\r\n      return `<span class=\"mjx-host\">${DOMPurify.sanitize(rendered)}</span>`;\r\n    },\r\n    clearChat() {\r\n      this.messages = [];\r\n      this.updateCurrentChat();\r\n      this.persistCurrentChat();\r\n    },\r\n    \r\n    toggleDebug() { this.showDebug = !this.showDebug; },\r\n    \r\n    scrollToBottom() {\r\n      this.$nextTick(() => {\r\n        const container = this.$refs.messagesContainer;\r\n        if (container) container.scrollTop = container.scrollHeight;\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  flex: 1; /* 占用剩余空间 */\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n  background: #f7f7f8;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 24px;\r\n  border-bottom: 1px solid #e5e5e5;\r\n  background: white;\r\n}\r\n\r\n.header-actions { display:flex; gap:12px; }\r\n\r\n.chat-header h1 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n}\r\n\r\n.clear-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: transparent;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 6px;\r\n  color: #6b7280;\r\n  font-size: 13px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.clear-button:hover {\r\n  background: #f9fafb;\r\n  border-color: #9ca3af;\r\n}\r\n\r\n.debug-button {\r\n  display:flex;\r\n  align-items:center;\r\n  gap:4px;\r\n  padding:8px 12px;\r\n  background:#334155;\r\n  color:#e2e8f0;\r\n  border:1px solid #475569;\r\n  border-radius:6px;\r\n  font-size:13px;\r\n  cursor:pointer;\r\n  transition:.2s;\r\n}\r\n\r\n.debug-button:hover {\r\n  background:#475569;\r\n}\r\n\r\n.debug-button.active {\r\n  background:#0f766e;\r\n  border-color:#0d9488;\r\n}\r\n\r\n.chat-messages {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 24px;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n}\r\n\r\n.welcome-message {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50%;\r\n  text-align: center;\r\n}\r\n\r\n.welcome-content h2 {\r\n  color: #2d3748;\r\n  font-size: 32px;\r\n  font-weight: 600;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.welcome-content p {\r\n  color: #6b7280;\r\n  font-size: 18px;\r\n  line-height: 1.6;\r\n}\r\n\r\n.message-wrapper {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.message-wrapper.user {\r\n  background: #f7f7f8;\r\n}\r\n\r\n.message-wrapper.assistant {\r\n  background: white;\r\n  border-bottom: 1px solid #e5e5e5;\r\n}\r\n\r\n.message-content {\r\n  display: flex;\r\n  max-width: none;\r\n  margin: 0;\r\n  padding: 24px;\r\n  gap: 16px;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n}\r\n\r\n.avatar {\r\n  flex-shrink: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n}\r\n\r\n.user-avatar {\r\n  background: #10a37f;\r\n  color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ai-avatar {\r\n  background: #10a37f;\r\n  color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n}\r\n\r\n.message-text {\r\n  flex: 1;\r\n  color: #2d3748;\r\n  line-height: 1.6;\r\n  font-size: 16px;\r\n  padding-top: 4px;\r\n}\r\n\r\n.typing-indicator {\r\n  display: flex;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n\r\n.typing-indicator span {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n  background: #10a37f;\r\n  animation: typing 1.4s infinite ease-in-out;\r\n}\r\n\r\n.typing-indicator span:nth-child(1) { animation-delay: -0.32s; }\r\n.typing-indicator span:nth-child(2) { animation-delay: -0.16s; }\r\n\r\n@keyframes typing {\r\n  0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }\r\n  40% { transform: scale(1); opacity: 1; }\r\n}\r\n\r\n.chat-input-container {\r\n  padding: 10px 24px 18px; /* 下边距略减，整体更贴底 */\r\n  background: white;\r\n  border-top: 1px solid #e5e5e5;\r\n  width: 100%;\r\n  min-width: 0; /* 允许收缩 */\r\n  min-height: 280px; /* 提高下边界 */\r\n  display:flex;\r\n  flex-direction:column;\r\n}\r\n\r\n\r\n.chat-input-toolbar {\r\n  display:flex;\r\n  justify-content:flex-start;\r\n  margin:0 0 10px 0; /* 与上方 padding(14px) 相等，按钮上下留白一致且更小 */\r\n  gap:12px;\r\n}\r\n\r\n.new-chat-btn {\r\n  display:flex;\r\n  align-items:center;\r\n  gap:6px;\r\n  padding:6px 12px;\r\n  background:#10a37f;\r\n  color:#fff;\r\n  border:none;\r\n  border-radius:6px;\r\n  font-size:14px;\r\n  cursor:pointer;\r\n  transition:background .2s, box-shadow .2s;\r\n}\r\n\r\n.new-chat-btn:hover { background:#0d8f69; }\r\n\r\n.new-chat-btn:active { background:#0c7a5d; }\r\n\r\n.input-wrapper {\r\n  display: flex;\r\n  max-width: none;\r\n  margin: 0;\r\n  background: white;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 12px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  transition: border-color 0.2s, box-shadow 0.2s;\r\n  width: 100%;\r\n  min-width: 10; /* 允许收缩 */\r\n}\r\n.input-wrapper.fill { flex:1; min-height:0; }\r\n\r\n.input-wrapper:focus-within {\r\n  border-color: #10a37f;\r\n  box-shadow: 0 2px 8px rgba(16, 163, 127, 0.1);\r\n}\r\n\r\n.message-input {\r\n  flex: 1;\r\n  border: none;\r\n  outline: none;\r\n  resize: none;\r\n  font-size: 18px;\r\n  line-height: 1.5;\r\n  color: #2d3748;\r\n  background: transparent;\r\n  min-height: 72px; /* 基础最小 */\r\n  max-height: 260px; /* 允许更多行 */\r\n}\r\n.input-wrapper.fill .message-input {\r\n  height: 100%;\r\n  min-height: 0;\r\n  max-height: none;\r\n  overflow-y: auto;\r\n}\r\n\r\n.message-input::placeholder {\r\n  color: #9ca3af;\r\n}\r\n\r\n.send-button {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: none;\r\n  background: #10a37f;\r\n  color: white;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  align-self: flex-end;\r\n}\r\n\r\n.send-button:hover:not(:disabled) {\r\n  background: #0d8f69;\r\n}\r\n\r\n.send-button:disabled {\r\n  background: #d1d5db;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid transparent;\r\n  border-top: 2px solid currentColor;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n/* 滚动条样式 */\r\n.chat-messages::-webkit-scrollbar {\r\n  width: 4px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb {\r\n  background: #d1d5db;\r\n  border-radius: 2px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb:hover {\r\n  background: #9ca3af;\r\n}\r\n\r\n/* Debug 面板样式 */\r\n.chat-container { position:relative; /* 保证绝对定位的 debug 面板 */ }\r\n.debug-panel {\r\n  position:absolute;\r\n  top:0;\r\n  right:0;\r\n  width:360px;\r\n  height:100%;\r\n  background:#0f172a;\r\n  color:#e2e8f0;\r\n  border-left:1px solid #334155;\r\n  display:flex;\r\n  flex-direction:column;\r\n  z-index:30;\r\n}\r\n\r\n.debug-header {\r\n  display:flex;\r\n  justify-content:space-between;\r\n  align-items:center;\r\n  padding:10px 14px;\r\n  background:#1e293b;\r\n  border-bottom:1px solid #334155;\r\n  font-size:14px;\r\n  font-weight:600;\r\n}\r\n\r\n.close-btn {\r\n  background:transparent;\r\n  border:none;\r\n  color:#94a3b8;\r\n  font-size:20px;\r\n  line-height:1;\r\n  cursor:pointer;\r\n}\r\n\r\n.close-btn:hover {\r\n  color:#f1f5f9;\r\n}\r\n\r\n.debug-section {\r\n  padding:10px 14px;\r\n  border-bottom:1px solid #1e293b;\r\n  overflow:auto;\r\n}\r\n\r\n.debug-section h4 {\r\n  margin:0 0 6px 0;\r\n  font-size:12px;\r\n  font-weight:600;\r\n  color:#94a3b8;\r\n  text-transform:uppercase;\r\n  letter-spacing:.5px;\r\n}\r\n\r\n.debug-pre {\r\n  margin:0;\r\n  font-size:12px;\r\n  line-height:1.4;\r\n  white-space:pre-wrap;\r\n  word-break:break-word;\r\n  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, \"Courier New\", monospace;\r\n  background:#1e293b;\r\n  padding:8px;\r\n  border-radius:4px;\r\n  max-height:150px;\r\n  overflow:auto;\r\n}\r\n\r\n@media (max-width: 900px){\r\n  .debug-panel { width:100%; }\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .chat-messages {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .message-content {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .chat-input-container {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .welcome-content h2 {\r\n    font-size: 24px;\r\n  }\r\n  \r\n  .welcome-content p {\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n/* Markdown & 代码高亮样式 */\r\n/* 将正文基础字号从 14px 提升到 17px（放大 3px），提高可读性 */\r\n.message-text { font-size:17px; line-height:1.65; }\r\n.message-text h1, .message-text h2, .message-text h3 { font-weight:600; margin:16px 0 8px; line-height:1.3; }\r\n.message-text h1 { font-size:25px; }\r\n.message-text h2 { font-size:21px; }\r\n.message-text h3 { font-size:19px; }\r\n.message-text p { margin: 0 0 10px; }\r\n.message-text ul, .message-text ol { padding-left: 24px; margin: 8px 0 12px; }\r\n.message-text li { margin: 4px 0; }\r\n.message-text code { background:#f3f4f6; padding:2px 5px; border-radius:4px; font-size:15px; }\r\n/* 覆盖/强化代码块与行内代码视觉 */\r\n.code-block-wrapper { position:relative; background:#0d1117; border:1px solid #30363d; border-radius:8px; margin:16px 0; box-shadow:0 2px 4px rgba(0,0,0,.2); }\r\n.code-block-header { display:flex; justify-content:space-between; align-items:center; font-size:12px; background:#161b22; color:#9ca3b8; padding:6px 12px; border-bottom:1px solid #30363d; }\r\n.code-block-header span { font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Courier New', monospace; color:#c9d1d9; }\r\n.code-block-header button { background:#21262d; color:#c9d1d9; border:1px solid #30363d; padding:2px 10px; border-radius:4px; cursor:pointer; font-size:12px; }\r\n.code-block-header button:hover { background:#30363d; }\r\n.code-block-wrapper pre { margin:0; padding:14px 16px; overflow:auto; font-size:15px; line-height:1.55; }\r\n/* 让 highlight.js 主题不被覆盖 */\r\n.hljs { background:transparent; }\r\n/* ------------- KaTeX / 数学公式相关 -------------\r\n  说明：KaTeX 渲染结果是通过 v-html 注入的，不会带有当前组件的 scoped attribute，\r\n  因此直接写 .katex / .katex-display 在 scoped 块里不会生效，需要用 :deep()。\r\n  如果仍然出现上标/根号错位，通常是因为基础 CSS 未成功加载，请检查：\r\n    1. 是否只在此处 (scoped) @import（不要这样做）\r\n    2. 打开 DevTools Elements 里查看 .katex span 是否有样式（如 .katex .vlist-span 等）\r\n*/\r\n/* :deep(.katex) { font-size: 1.02em; } */\r\n/* :deep(.katex-display) { margin:16px 0; padding:12px 16px; background:#f8fafc; border:1px dashed #cbd5e1; border-radius:6px; } */\r\n/* 若使用 Vue2 老语法可改为  >>> .katex  或  /deep/ .katex  */\r\n</style>\r\n<style>\r\n/* 保留全局 markdown / 表格 / 任务列表样式（不再重复引入 KaTeX） */\r\n.message-text table { border-collapse:collapse; }\r\n.message-text table th, .message-text table td { border:1px solid #e2e8f0; }\r\n.message-text input[type=checkbox] { margin-right:6px; }\r\n</style>\r\n","// 通用 LLM 提供商配置工具（支持多提供商 + 动态本地存储 API Key）\r\n// 仅在浏览器端使用 localStorage 持久化，未做加密，请勿在共享/不安全环境存储生产密钥。\r\n\r\nconst PROVIDER_STORAGE_KEY = (p) => `llm_api_key_${p}`; // localStorage key 方案\r\n\r\n// 读取指定提供商的 API Key\r\nexport function getApiKey(provider) {\r\n  try { return localStorage.getItem(PROVIDER_STORAGE_KEY(provider)) || ''; } catch { return ''; }\r\n}\r\n\r\n// 保存指定提供商的 API Key\r\nexport function saveApiKey(provider, key) {\r\n  try { localStorage.setItem(PROVIDER_STORAGE_KEY(provider), key.trim()); } catch { /* 忽略 */ }\r\n}\r\n\r\n// 简单校验：非空且长度 > 10，可按需扩展（例如正则头缀判断）\r\nexport function isApiKeyValid(provider) {\r\n  const k = getApiKey(provider);\r\n  return !!k && k.length > 10; // 仅基础校验\r\n}\r\n\r\n// 各提供商基础配置（可按需扩展 headers / body transformer 等）\r\nexport function getProviderConfig(provider) {\r\n  switch (provider) {\r\n    case 'deepseek':\r\n      return {\r\n        name: 'DeepSeek',\r\n        apiUrl: 'https://api.deepseek.com/v1/chat/completions', // 占位，如与官方不同请替换\r\n        // 可扩展特定参数，如 stream / reasoning_mode 等\r\n        defaultParams: { temperature: 0.7, max_tokens: 4000 }\r\n      };\r\n    case 'openai':\r\n    default:\r\n      return {\r\n        name: 'OpenAI',\r\n        apiUrl: 'https://api.openai.com/v1/chat/completions',\r\n        // defaultParams: { temperature: 0.7, max_tokens: 1000 }\r\n        defaultParams: {}\r\n      };\r\n  }\r\n}\r\n\r\n// 统一构建请求 Payload（可在此做 provider 差异化适配）\r\nexport function buildChatPayload({ provider, model, messages, temperature, maxTokens }) {\r\n  const cfg = getProviderConfig(provider);\r\n  return {\r\n    model,\r\n    messages,\r\n    temperature: temperature ?? cfg.defaultParams.temperature,\r\n    max_tokens: maxTokens ?? cfg.defaultParams.max_tokens\r\n  };\r\n}\r\n\r\n// 构建请求头\r\nexport function buildAuthHeaders(provider) {\r\n  const key = getApiKey(provider);\r\n  return {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `Bearer ${key}`\r\n  };\r\n}\r\n\r\n// 对外暴露一个轻量总校验（当前仅校验 key）\r\nexport function isConfigReady(provider) {\r\n  return isApiKeyValid(provider);\r\n}\r\n\r\n// （兼容旧代码）导出占位 openaiConfig / isConfigValid，避免其它文件未更新时报错\r\nexport const openaiConfig = { apiSettings: { maxTokens: 1000, temperature: 0.7 } };\r\nexport const isConfigValid = () => isConfigReady('openai');\r\n\r\n","import { render } from \"./chat_box.vue?vue&type=template&id=0ad87c93&scoped=true\"\nimport script from \"./chat_box.vue?vue&type=script&lang=js\"\nexport * from \"./chat_box.vue?vue&type=script&lang=js\"\n\nimport \"./chat_box.vue?vue&type=style&index=0&id=0ad87c93&scoped=true&lang=css\"\nimport \"./chat_box.vue?vue&type=style&index=1&id=0ad87c93&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ad87c93\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"setting-panel\">\r\n    <!-- 头部 -->\r\n    <div class=\"panel-header\">\r\n      <h2>设置</h2>\r\n    </div>\r\n\r\n    <!-- 模型选择 (可折叠) -->\r\n    <div class=\"collapsible-section\" :class=\"{collapsed: collapsed.model}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('model')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.model}\">▶</span>\r\n          <h3>模型选择</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.model\">\r\n        <!-- Provider 选择 -->\r\n        <div class=\"model-select-wrapper\">\r\n          <label class=\"field-label\">提供商</label>\r\n          <select v-model=\"selectedProvider\" @change=\"onProviderChange\" class=\"model-select\">\r\n            <option v-for=\"p in providers\" :key=\"p.value\" :value=\"p.value\">{{ p.label }}</option>\r\n          </select>\r\n          <div class=\"select-arrow\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg></div>\r\n        </div>\r\n        <!-- Model 选择 -->\r\n        <div class=\"model-select-wrapper\">\r\n          <label class=\"field-label\">模型</label>\r\n            <select v-model=\"selectedModel\" @change=\"onModelChange\" class=\"model-select\">\r\n              <option v-for=\"m in filteredModels\" :key=\"m.value\" :value=\"m.value\">{{ m.name }} - {{ m.description }}</option>\r\n            </select>\r\n            <div class=\"select-arrow\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg></div>\r\n        </div>\r\n        <!-- API Key 输入 -->\r\n        <div class=\"api-key-wrapper\" :class=\"{ invalid: !providerKeyValid }\">\r\n          <label class=\"field-label\">{{ currentProviderLabel }} API Key</label>\r\n          <div class=\"api-key-input-row\">\r\n            <input :type=\"showApiKey ? 'text':'password'\" v-model=\"apiKeyInput\" placeholder=\"输入并保存当前提供商 API Key\" @input=\"onApiKeyInput\" />\r\n            <button class=\"save-key-btn\" @click=\"saveCurrentApiKey\" :disabled=\"!apiKeyDirty || !apiKeyInput.trim()\">保存</button>\r\n            <button class=\"toggle-key-btn\" @click=\"showApiKey=!showApiKey\">{{ showApiKey ? '隐藏' : '显示' }}</button>\r\n          </div>\r\n          <p class=\"api-key-hint\" v-if=\"!providerKeyValid\">未检测到有效 Key，请先填写。</p>\r\n          <p class=\"api-key-hint ok\" v-else>已保存。</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Prompt 配置 (新增，可折叠) -->\r\n    <div class=\"collapsible-section\" :class=\"{collapsed: collapsed.prompt}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('prompt')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.prompt}\">▶</span>\r\n          <h3>对话配置</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.prompt\">\r\n        <div class=\"prompt-toolbar\">\r\n          <!-- 新对话按钮已移至 ChatBox 中 -->\r\n          <div class=\"prompt-type-select-wrapper\">\r\n            <select v-model=\"promptTypeSelection\" class=\"prompt-type-select\" @change=\"onPromptTypeChange\">\r\n              <option v-for=\"opt in promptTypeOptions\" :key=\"opt.value\" :value=\"opt.value\">{{ opt.label }}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"prompt-editor-wrapper\">\r\n          <textarea\r\n            v-model=\"promptEditorContent\"\r\n            class=\"prompt-editor\"\r\n            :readonly=\"promptTypeSelection!=='自定义'\"\r\n            placeholder=\"请输入自定义 Prompt...\"\r\n          ></textarea>\r\n          <div class=\"history-turns-row\">\r\n            <label>最大历史对话轮数</label>\r\n            <input type=\"number\" min=\"0\" max=\"100\" v-model.number=\"maxHistoryInput\" />\r\n            \r\n          </div>\r\n          <div class=\"prompt-actions\">\r\n            <button class=\"apply-prompt-btn\" @click=\"applyPrompt\" :disabled=\"!currentChatId\">应用 Prompt</button>\r\n            <span class=\"prompt-status\" v-if=\"currentChatPromptAppliedAt\">已应用 {{ formatTime(currentChatPromptAppliedAt) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 聊天记录列表 (可折叠) -->\r\n    <div class=\"collapsible-section chat-history-section\" :class=\"{collapsed: collapsed.history}\">\r\n      <div class=\"section-header clickable\" @click=\"toggleCollapse('history')\">\r\n        <div class=\"section-title\">\r\n          <span class=\"arrow\" :class=\"{open: !collapsed.history}\">▶</span>\r\n          <h3>聊天记录</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"section-body\" v-show=\"!collapsed.history\">\r\n        <div class=\"chat-list\">\r\n          <div \r\n            v-for=\"chat in chatHistory\" \r\n            :key=\"chat.id\"\r\n            class=\"chat-item\"\r\n            :class=\"{ active: currentChatId === chat.id }\"\r\n            @click=\"selectChat(chat.id)\"\r\n          >\r\n            <div class=\"chat-title\">{{ chat.title }}</div>\r\n            <div class=\"chat-time\">{{ formatTime(chat.updatedAt) }}</div>\r\n            <button @click.stop=\"deleteChat(chat.id)\" class=\"delete-btn\">\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                <path d=\"M18 6L6 18M6 6l12 12\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div v-if=\"chatHistory.length === 0\" class=\"empty-state\">\r\n            <p>暂无聊天记录</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'SettingPanel',\r\n  props: { currentChatId: { type: [String, Number], default: null } },\r\n  data() {\r\n    return {\r\n      // Provider & Model\r\n      selectedProvider: 'openai',\r\n      providers: [ { value: 'openai', label: 'OpenAI' }, { value: 'deepseek', label: 'DeepSeek' } ],\r\n      selectedModel: 'gpt-4.1',\r\n      models: [\r\n        { provider:'openai', value:'gpt-4.1', name:'GPT-4.1', description:'高性能通用' },\r\n        { provider:'openai', value:'gpt-4.1-mini', name:'GPT-4.1 Mini', description:'轻量快速' },\r\n        { provider:'openai', value:'gpt-5', name:'GPT-5', description:'下一代（示例）' },\r\n        { provider:'openai', value:'gpt-5-mini', name:'GPT-5 Mini', description:'下一代轻量（示例）' },\r\n        { provider:'deepseek', value:'deepseek-chat', name:'DeepSeek V3', description:'V3 主力模型' },\r\n        { provider:'deepseek', value:'deepseek-reasoner', name:'DeepSeek R1', description:'R1 推理模型' },\r\n      ],\r\n      apiKeyInput: '',\r\n      apiKeyDirty: false,\r\n      showApiKey: false,\r\n      // Chat & Prompt\r\n      chatHistory: [],\r\n      promptTypeOptions: [ { value:'聊天助手', label:'聊天助手' }, { value:'中英文互译', label:'中英文互译' }, { value:'自定义', label:'自定义' } ],\r\n      promptTypeSelection: '聊天助手',\r\n      promptEditorContent: '',\r\n      currentChatPromptAppliedAt: null,\r\n      collapsed: { model:false, prompt:false, history:false },\r\n      maxHistoryInput: 20\r\n    };\r\n  },\r\n  watch: {\r\n    currentChatId(n){ this.syncPromptUIFromChat(n); },\r\n    selectedProvider(){ this.ensureModelForProvider(); this.loadProviderApiKey(); }\r\n  },\r\n  computed: {\r\n    filteredModels(){ return this.models.filter(m=>m.provider===this.selectedProvider); },\r\n    currentProviderLabel(){ const p=this.providers.find(p=>p.value===this.selectedProvider); return p? p.label : this.selectedProvider; },\r\n    providerKeyValid(){ return this.isApiKeyValidRaw(this.apiKeyInput); }\r\n  },\r\n  methods: {\r\n    // Provider & API Key\r\n    providerStorageKey(p){ return `llm_api_key_${p}`; },\r\n    loadProviderApiKey(){ try { this.apiKeyInput = localStorage.getItem(this.providerStorageKey(this.selectedProvider)) || ''; } catch { this.apiKeyInput=''; } this.apiKeyDirty=false; },\r\n  saveCurrentApiKey(){ try { localStorage.setItem(this.providerStorageKey(this.selectedProvider), this.apiKeyInput.trim()); } catch (e) { /* ignore storage errors (quota/privacy) */ } this.apiKeyDirty=false; },\r\n    onApiKeyInput(){ this.apiKeyDirty = true; },\r\n    isApiKeyValidRaw(k){ return !!k && k.trim().length>10; },\r\n    onProviderChange(){ this.ensureModelForProvider(); this.loadProviderApiKey(); this.emitModelChanged(); },\r\n    ensureModelForProvider(){ if(!this.models.find(m=>m.provider===this.selectedProvider && m.value===this.selectedModel)){ const first=this.models.find(m=>m.provider===this.selectedProvider); if(first) this.selectedModel=first.value; }},\r\n    onModelChange(){ this.emitModelChanged(); },\r\n    emitModelChanged(){ this.$emit('model-changed', `${this.selectedProvider}:${this.selectedModel}`); this.saveToStorage(); },\r\n\r\n    // Prompt Global\r\n    globalPromptPrefix(){ return ['【全局输出规范】','1. 所有回答使用 Markdown 格式组织（标题、列表、表格、代码块等）。','2. 代码使用 ```语言\\n...\\n```，不要省略语言（若不确定可用 text）。','3. 数学公式：行内使用 $公式$，块级使用 $$\\n公式\\n$$。','4. 若需要同时给出多种方案，使用有序或无序列表。','5. 避免冗长寒暄，直接切入主题。'].join('\\n'); },\r\n    composeWithGlobal(core){ if(!core) return this.globalPromptPrefix(); const g=this.globalPromptPrefix(); return core.startsWith(g.slice(0,6))? core : g+'\\n\\n'+core; },\r\n    ensureGlobal(p){ return this.composeWithGlobal(p||''); },\r\n    toggleCollapse(k){ this.collapsed[k]=!this.collapsed[k]; },\r\n    promptPresets(){ return { '聊天助手':'你是一个友好、高效且专业的中文智能助手。请使用清晰、结构化的中文回答，必要时使用列表、步骤或示例。除非用户特别要求，请避免多余的寒暄，直接切入重点。','中英文互译':'你是一名专业的中英文互译助手。\\n要求：\\n1. 识别输入语言，翻译成另一种语言；\\n2. 保留原意、语气和专有名词；\\n3. 若输入同时含两种语言，则分别给出两种语言的优化版本；\\n4. 输出格式：\\n- 原文: ...\\n- 翻译: ...\\n- 备注: ...' }; },\r\n    defaultHistoryTurnsMap(){ return { '聊天助手':20,'中英文互译':0,'自定义':10 }; },\r\n    storageKey(){ return 'chat_history_v1'; }, modelKey(){ return 'chat_selected_model'; }, lastChatKey(){ return 'chat_last_chat_id'; },\r\n    saveToStorage(){ try { const data=this.chatHistory.map(c=>({...c,createdAt:c.createdAt instanceof Date?c.createdAt.toISOString():c.createdAt,updatedAt:c.updatedAt instanceof Date?c.updatedAt.toISOString():c.updatedAt,promptAppliedAt:c.promptAppliedAt instanceof Date?c.promptAppliedAt.toISOString():c.promptAppliedAt,maxHistoryTurns:c.maxHistoryTurns ?? this.defaultHistoryTurnsMap()[c.promptType||'聊天助手'],messages:c.messages.map(m=>({...m,timestamp:m.timestamp instanceof Date?m.timestamp.toISOString():m.timestamp}))})); localStorage.setItem(this.storageKey(), JSON.stringify(data)); localStorage.setItem(this.modelKey(), JSON.stringify({provider:this.selectedProvider, model:this.selectedModel})); } catch(e){ console.warn('保存聊天记录失败', e);} },\r\n    loadFromStorage(){ try { const raw=localStorage.getItem(this.storageKey()); const savedModel=localStorage.getItem(this.modelKey()); if(savedModel){ try { const sel=JSON.parse(savedModel); if(sel.provider) this.selectedProvider=sel.provider; if(sel.model) this.selectedModel=sel.model; } catch { this.selectedModel=savedModel; } this.ensureModelForProvider(); this.emitModelChanged(); this.loadProviderApiKey(); } else { this.emitModelChanged(); this.loadProviderApiKey(); } if(raw){ const parsed=JSON.parse(raw); this.chatHistory=parsed.map(c=>({...c,createdAt:c.createdAt?new Date(c.createdAt):new Date(),updatedAt:c.updatedAt?new Date(c.updatedAt):new Date(),promptAppliedAt:c.promptAppliedAt?new Date(c.promptAppliedAt):null,promptType:c.promptType||'聊天助手',systemPrompt:this.ensureGlobal(c.systemPrompt||this.promptPresets()['聊天助手']),customPrompt:c.customPrompt||'',maxHistoryTurns:typeof c.maxHistoryTurns==='number'?c.maxHistoryTurns:this.defaultHistoryTurnsMap()[c.promptType||'聊天助手'],messages:(c.messages||[]).map(m=>({...m,timestamp:m.timestamp?new Date(m.timestamp):new Date()})) })); } } catch(e){ console.warn('加载聊天记录失败', e); } },\r\n  saveLastChatId(id){ try { localStorage.setItem(this.lastChatKey(), String(id)); } catch (e) { /* ignore */ } },\r\n    getLastChatId(){ try { return localStorage.getItem(this.lastChatKey()); } catch { return null; } },\r\n    createNewChat(){ const type='聊天助手'; const core=this.promptPresets()[type]; const newChat={ id:Date.now(), title:'新对话', messages:[], createdAt:new Date(), updatedAt:new Date(), promptType:type, systemPrompt:this.composeWithGlobal(core), customPrompt:'', promptAppliedAt:new Date(), maxHistoryTurns:this.defaultHistoryTurnsMap()[type] }; this.chatHistory.unshift(newChat); this.saveToStorage(); this.saveLastChatId(newChat.id); this.$emit('chat-selected', newChat); this.syncPromptUIFromChat(newChat.id); },\r\n    selectChat(id){ const chat=this.chatHistory.find(c=>c.id===id); if(chat){ this.saveLastChatId(id); this.$emit('chat-selected', chat); this.syncPromptUIFromChat(id);} },\r\n    deleteChat(id){ const idx=this.chatHistory.findIndex(c=>c.id===id); if(idx>-1){ this.chatHistory.splice(idx,1); this.saveToStorage(); if(this.currentChatId===id){ this.$emit('chat-deleted', id); if(this.chatHistory.length>0){ this.selectChat(this.chatHistory[0].id);} else { this.createNewChat(); } } } },\r\n    updateChatHistory(chat){ const idx=this.chatHistory.findIndex(c=>c.id===chat.id); if(idx>-1){ const firstUser=chat.messages.find(m=>m.type==='user'); let title=this.chatHistory[idx].title; if(firstUser){ const cand=firstUser.text.substring(0,20)+(firstUser.text.length>20?'...':''); if(title==='新对话'||title===''||title.startsWith('新对话')) title=cand; } const { promptType, systemPrompt, customPrompt, promptAppliedAt }=this.chatHistory[idx]; this.chatHistory[idx]={ ...chat, title, promptType, systemPrompt:this.ensureGlobal(systemPrompt), customPrompt, promptAppliedAt }; this.saveToStorage(); } },\r\n    applyPrompt(){ if(!this.currentChatId) return; const chat=this.chatHistory.find(c=>c.id===this.currentChatId); if(!chat) return; chat.promptType=this.promptTypeSelection; if(this.promptTypeSelection==='自定义'){ chat.customPrompt=this.promptEditorContent.trim(); chat.systemPrompt=this.composeWithGlobal(chat.customPrompt); } else { const core=this.promptPresets()[this.promptTypeSelection]; chat.systemPrompt=this.composeWithGlobal(core); } chat.maxHistoryTurns=Number.isFinite(this.maxHistoryInput)? Math.max(0,Math.min(100,this.maxHistoryInput)) : this.defaultHistoryTurnsMap()[chat.promptType]; chat.promptAppliedAt=new Date(); chat.updatedAt=new Date(); this.currentChatPromptAppliedAt=chat.promptAppliedAt; this.saveToStorage(); this.$emit('chat-selected', { ...chat }); },\r\n    onPromptTypeChange(){ if(this.promptTypeSelection==='自定义'){ const chat=this.chatHistory.find(c=>c.id===this.currentChatId); this.promptEditorContent=chat? (chat.customPrompt || this.promptEditorContent || '') : (this.promptEditorContent||''); } else { this.promptEditorContent=this.promptPresets()[this.promptTypeSelection]; } this.maxHistoryInput=this.defaultHistoryTurnsMap()[this.promptTypeSelection]; },\r\n    syncPromptUIFromChat(id){ const chat=this.chatHistory.find(c=>c.id===id); if(!chat) return; this.promptTypeSelection=chat.promptType||'聊天助手'; if(this.promptTypeSelection==='自定义'){ this.promptEditorContent=chat.customPrompt||''; } else { const core=this.promptPresets()[this.promptTypeSelection]; this.promptEditorContent=core; } this.maxHistoryInput= typeof chat.maxHistoryTurns==='number'? chat.maxHistoryTurns : this.defaultHistoryTurnsMap()[this.promptTypeSelection]; this.currentChatPromptAppliedAt=chat.promptAppliedAt||null; },\r\n    formatTime(date){ const d=date instanceof Date? date : new Date(date); const now=new Date(); const diff=now-d; const m=Math.floor(diff/60000); const h=Math.floor(diff/3600000); const day=Math.floor(diff/86400000); if(m<1) return '刚刚'; if(m<60) return `${m}分钟前`; if(h<24) return `${h}小时前`; if(day<7) return `${day}天前`; return d.toLocaleDateString(); }\r\n  },\r\n  mounted(){ this.loadFromStorage(); if(this.chatHistory.length===0){ this.createNewChat(); } else { const lastId=this.getLastChatId(); const toSelect=this.chatHistory.find(c=>String(c.id)===String(lastId))||this.chatHistory[0]; this.$emit('chat-selected', toSelect); this.syncPromptUIFromChat(toSelect.id); } window.addEventListener('beforeunload', this.saveToStorage); },\r\n  beforeUnmount(){ window.removeEventListener('beforeunload', this.saveToStorage); }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 保留原有基础样式（部分调整适应折叠与新增区域） */\r\n.setting-panel { width:300px; height:100vh; background:#f8f9fa; border-right:1px solid #e5e5e5; display:flex; flex-direction:column; flex-shrink:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; }\r\n.panel-header { padding:20px; border-bottom:1px solid #e5e5e5; background:#fff; }\r\n.panel-header h2 { margin:0; font-size:22px; font-weight:600; color:#2d3748; }\r\n\r\n.collapsible-section { background:#fff; border-bottom:1px solid #e5e5e5; display:flex; flex-direction:column; }\r\n.section-header { display:flex; align-items:center; padding:16px 20px; user-select:none; }\r\n.section-header.clickable { cursor:pointer; }\r\n.section-title { display:flex; align-items:center; gap:6px; }\r\n.section-header h3 { margin:0; font-size:16px; font-weight:600; color:#4a5568; text-transform:uppercase; letter-spacing:.5px; }\r\n.arrow { display:inline-block; font-size:14px; transition:transform .2s; color:#6b7280; }\r\n.arrow.open { transform:rotate(90deg); }\r\n.section-body { padding:0 20px 16px 20px; }\r\n.collapsible-section.collapsed .section-body { display:none; }\r\n\r\n.model-select-wrapper { position:relative; margin-top:8px; }\r\n.model-select { width:100%; padding:12px 40px 12px 12px; border:1px solid #e2e8f0; border-radius:8px; font-size:14px; color:#2d3748; background:#fff; cursor:pointer; appearance:none; transition:.2s; }\r\n.model-select:hover { border-color:#10a37f; }\r\n.model-select:focus { outline:none; border-color:#10a37f; box-shadow:0 0 0 3px rgba(16,163,127,.1); }\r\n.select-arrow { position:absolute; right:12px; top:50%; transform:translateY(-50%); pointer-events:none; color:#6b7280; }\r\n\r\n/* Prompt 区域 */\r\n.prompt-toolbar { display:flex; gap:8px; align-items:center; margin-top:12px;}\r\n.prompt-type-select-wrapper { flex:1; }\r\n.prompt-type-select { width:100%; padding:6px 8px; border:1px solid #e2e8f0; border-radius:6px; font-size:14px; background:#fff; cursor:pointer; }\r\n.prompt-editor-wrapper { margin-top:12px; display:flex; flex-direction:column; gap:8px; }\r\n.prompt-editor { width:100%; min-height:120px; resize:vertical; padding:10px 12px; font-size:14px; line-height:1.5; border:1px solid #e2e8f0; border-radius:8px; background:#fdfdfd; font-family:monospace; }\r\n.prompt-editor[readonly] { background:#f5f7fa; color:#4a5568; }\r\n.prompt-actions { display:flex; align-items:center; gap:12px; }\r\n.apply-prompt-btn { padding:6px 14px; background:#2563eb; border:none; color:#fff; font-size:14px; border-radius:6px; cursor:pointer; transition:.2s; }\r\n.apply-prompt-btn:hover:not(:disabled) { background:#1d4ed8; }\r\n.apply-prompt-btn:disabled { background:#93c5fd; cursor:not-allowed; }\r\n.prompt-status { font-size:12px; color:#6b7280; }\r\n\r\n.history-turns-row { display:flex; align-items:center; gap:8px; font-size:12px; color:#4b5563; }\r\n.history-turns-row label { font-weight:600; }\r\n.history-turns-row input { width:70px; padding:4px 6px; border:1px solid #e2e8f0; border-radius:6px; font-size:12px; }\r\n.history-turns-row .hint { color:#9ca3af; font-size:11px; }\r\n\r\n/* 聊天列表 */\r\n.chat-list { flex:1; overflow-y:auto; padding:8px; max-height:300px; }\r\n.chat-item { display:flex; flex-direction:column; padding:12px; margin-bottom:4px; border-radius:8px; cursor:pointer; transition:background .2s; position:relative; background:#fff; border:1px solid transparent; }\r\n.chat-item:hover { background:#f8f9fa; border-color:#e5e5e5; }\r\n.chat-item.active { background:#ecfdf5; border-color:#10a37f; }\r\n.chat-title { font-size:14px; font-weight:500; color:#2d3748; margin-bottom:4px; line-height:1.3; }\r\n.chat-time { font-size:12px; color:#6b7280; }\r\n.delete-btn { position:absolute; top:8px; right:8px; width:20px; height:20px; background:transparent; border:none; border-radius:4px; color:#9ca3af; cursor:pointer; display:flex; align-items:center; justify-content:center; opacity:0; transition:.2s; }\r\n.chat-item:hover .delete-btn { opacity:1; }\r\n.delete-btn:hover { background:#fee2e2; color:#dc2626; }\r\n.empty-state { display:flex; justify-content:center; align-items:center; height:100px; color:#9ca3af; font-size:14px; }\r\n.chat-list::-webkit-scrollbar { width:4px; }\r\n.chat-list::-webkit-scrollbar-track { background:transparent; }\r\n.chat-list::-webkit-scrollbar-thumb { background:#d1d5db; border-radius:2px; }\r\n.chat-list::-webkit-scrollbar-thumb:hover { background:#9ca3af; }\r\n\r\n.api-key-wrapper { margin-top:12px; display:flex; flex-direction:column; gap:6px; }\r\n.api-key-wrapper.invalid input { border-color:#dc2626; }\r\n.api-key-input-row { display:flex; gap:8px; align-items:center; }\r\n.api-key-input-row input { flex:1; padding:8px 10px; border:1px solid #e2e8f0; border-radius:6px; font-size:12px; }\r\n.save-key-btn, .toggle-key-btn { padding:6px 10px; background:#10a37f; color:#fff; border:none; border-radius:6px; font-size:12px; cursor:pointer; }\r\n.save-key-btn:disabled { background:#9ca3af; cursor:not-allowed; }\r\n.api-key-hint { font-size:12px; color:#dc2626; }\r\n.api-key-hint.ok { color:#16a34a; }\r\n.field-label { display:block; font-size:12px; font-weight:600; color:#4a5568; margin-bottom:4px; }\r\n\r\n@media (max-width:768px){\r\n  .setting-panel { width:250px; }\r\n  .section-header { padding:14px 16px; }\r\n  .section-body { padding:0 16px 14px 16px; }\r\n  .chat-list { max-height:240px; }\r\n}\r\n</style>\r\n","import { render } from \"./setting_panel.vue?vue&type=template&id=e095943c&scoped=true\"\nimport script from \"./setting_panel.vue?vue&type=script&lang=js\"\nexport * from \"./setting_panel.vue?vue&type=script&lang=js\"\n\nimport \"./setting_panel.vue?vue&type=style&index=0&id=e095943c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e095943c\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=16f4c4a6\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=16f4c4a6&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_vue_demo\"] = self[\"webpackChunkmy_vue_demo\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(1213); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","_createVNode","_component_SettingPanel","currentChatId","$data","onModelChanged","$options","handleModelChange","onChatSelected","handleChatSelected","onChatDeleted","handleChatDeleted","ref","_component_ChatBox","currentChat","selectedModel","onChatUpdated","handleChatUpdated","onNewChat","handleCreateNewChat","class","width","height","viewBox","fill","_createElementVNode","_hoisted_2","_toDisplayString","currentModel","currentChatTitle","_hoisted_3","onClick","_cache","args","toggleDebug","_normalizeClass","active","showDebug","d","stroke","clearChat","_hoisted_4","messages","length","_hoisted_5","_Fragment","_renderList","message","key","type","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","isTyping","_hoisted_11","innerHTML","renderedMessage","text","_hoisted_13","_hoisted_14","$event","_ctx","$emit","_hoisted_15","currentMessage","onKeydown","handleKeydown","onInput","adjustTextareaHeight","placeholder","rows","disabled","isLoading","sendMessage","trim","_hoisted_19","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22","currentSystemPrompt","_hoisted_24","_hoisted_25","formattedLastRequest","_hoisted_26","_hoisted_27","lastResponseRaw","_hoisted_28","lastResponseText","PROVIDER_STORAGE_KEY","p","getApiKey","provider","localStorage","getItem","isApiKeyValid","k","getProviderConfig","name","apiUrl","defaultParams","temperature","max_tokens","buildChatPayload","model","maxTokens","cfg","buildAuthHeaders","isConfigReady","window","MathJax","tex","inlineMath","displayMath","processEscapes","tags","options","skipHtmlTags","ignoreHtmlClass","startup","typeset","console","log","DOMPurify","setConfig","USE_PROFILES","html","e","props","Object","default","String","data","lastRequestPayload","md","mathJaxReady","mjTypesetTimer","computed","raw","this","includes","split","slice","join","toUpperCase","title","systemPrompt","JSON","stringify","watch","handler","newChat","$nextTick","scrollToBottom","immediate","created","MarkdownIt","linkify","breaks","highlight","str","lang","hljs","getLanguage","out","language","ignoreIllegals","value","utils","escapeHtml","use","markdownItTaskLists","enabled","markdownItMultiMdTable","multiline","rowspan","headerless","defaultFence","renderer","rules","fence","tokens","idx","env","self","token","info","codeHtml","content","encodeURIComponent","mounted","$el","addEventListener","btn","target","closest","decodeURIComponent","getAttribute","navigator","clipboard","writeText","then","innerText","setTimeout","loadMathJax","updated","scheduleMathTypeset","methods","storageKey","persistCurrentChat","arr","parse","findIndex","c","map","m","timestamp","Date","toISOString","updatedAt","setItem","warn","userMessage","now","push","aiMessage","response","callOpenAI","pop","error","updateCurrentChat","updatedChat","parts","conversationHistory","buildConversationHistory","payload","providerCfg","fetch","method","headers","body","ok","Error","status","json","choices","history","role","maxTurns","maxHistoryTurns","filtered","filter","lastUserMessage","i","completedTurns","assistantMsg","j","selected","flat","event","ctrlKey","metaKey","preventDefault","textarea","$refs","messageInput","classList","contains","style","Math","min","scrollHeight","typesetPromise","scriptId","document","getElementById","s","createElement","async","src","onload","onerror","head","appendChild","clearTimeout","typesetMath","root","messagesContainer","targets","querySelectorAll","Array","from","catch","err","rendered","render","sanitize","container","scrollTop","__exports__","collapsed","toggleCollapse","open","selectedProvider","onChange","onProviderChange","providers","label","onModelChange","filteredModels","description","invalid","providerKeyValid","currentProviderLabel","showApiKey","apiKeyInput","onApiKeyInput","saveCurrentApiKey","apiKeyDirty","_hoisted_12","prompt","_hoisted_16","_hoisted_17","promptTypeSelection","onPromptTypeChange","promptTypeOptions","opt","promptEditorContent","readonly","max","maxHistoryInput","number","applyPrompt","$props","_hoisted_23","currentChatPromptAppliedAt","formatTime","chatHistory","chat","selectChat","_hoisted_29","_hoisted_30","_withModifiers","deleteChat","_hoisted_32","Number","models","n","syncPromptUIFromChat","ensureModelForProvider","loadProviderApiKey","find","isApiKeyValidRaw","providerStorageKey","emitModelChanged","first","saveToStorage","globalPromptPrefix","composeWithGlobal","core","g","startsWith","ensureGlobal","promptPresets","defaultHistoryTurnsMap","modelKey","lastChatKey","createdAt","promptAppliedAt","promptType","loadFromStorage","savedModel","sel","parsed","customPrompt","saveLastChatId","getLastChatId","createNewChat","unshift","splice","updateChatHistory","firstUser","cand","substring","isFinite","date","diff","floor","h","day","toLocaleDateString","lastId","toSelect","beforeUnmount","removeEventListener","components","ChatBox","SettingPanel","chatId","settingPanel","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","keys","every","r","getter","__esModule","a","definition","o","defineProperty","enumerable","get","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","forEach","bind","__webpack_exports__"],"sourceRoot":""}